(function(){function Ta(){u={x:0.15*l,y:0.8*r,move:null,button:null}}function ka(){na(f,{x:IPX+ca,y:IPY+ca,z:IPZ+ca,c:0,Aa:0,h:0,f:20,e:20,d:20,j:y,g:y,B:20,i:rb,color:Ba,face:"\uff61\u25d5  \u25d5\uff61",fa:"\u203f",ga:-5,ha:5,update:sb,o:-0.2});Ca||(Ca=oa(y,y,f,!0),Ua=oa(y,y,f,!1));f.$=Ca;f.U=Ua;D(f);pa=f.a-0.5*l;qa=f.b-0.7*r}function Va(a){e.save();-1E7<a.k&&(e.setTransform(1,0,0,0.3,a.a+a.B-4-K,a.b-a.k+a.z+2*a.B-1-OffsetY),e.beginPath(),e.arc(0,0,a.B,0,O),e.fillStyle=tb,e.fill());e.setTransform(1,
0,0,1,a.a-K,a.b-OffsetY);e.drawImage(0>a.c?a.$:a.U,0,0);e.restore()}function oa(a,b,c,d){return U(a,b,function(a){var b=c.B;a.translate(b,b);a.lineWidth=1;a.strokeStyle="#111";a.fillStyle=c.color;a.beginPath();a.arc(0,0,b,0,O);a.fill();a.scale(d?1:-1,1);a.fillStyle="#222";a.fillText(c.face,-15,1);a.fillText(c.fa,c.ga,c.ha);a.stroke()})}function rb(){Va(f)}function sb(a,b){var c=a.left,d=a.right,g=a.R,h=0.22*b;a.c=c?a.c-h:d?a.c+h:a.c*Math.pow(0.9,b);h=g?3.5:2.5;if(P(a.c)>h){var G=Math.pow(0.95,b);
a.c=0>a.c?p(a.c*G,-h):t(a.c*G,h)}Wa(a,b);0<a.h&&(h=Da(a.x,a.y,a.z,20,Ea))&&(Xa.play(),a.z=h.z-20,a.h*=-0.8);-1E3>a.z&&ka();h=Fa(a.x,a.y,a.z,20);a.k=-Infinity;if(h.d){if(a.floor=h,a.k=h.z+ca,a.z<=a.k||!a.floor.V&&g&&5>a.z-a.k&&2>P(a.h)){if(a.floor.V&&0>a.h){ka();return}-2>a.h||g?ub.play():-1>a.h&&vb.play();a.z=a.k;a.h=g?t(P(a.h/2),6):t(P(a.h/2),P(a.c)/1.5)}}else a.floor=!1;if(h=Da(a.x,a.y,a.z,20,0<a.c?ra:sa))a.x=0<a.c?h.x-20:h.x+h.e+20,Xa.play(),a.c=10<a.z-a.k?-0.2*a.c:-0.8*a.c;D(a);a.a-=ca;a.b-=ca/
2;if(c||d)pa=a.a-l*(0.5-a.c/20);a.n&&(a.o-=0.01);a.m&&(a.o+=0.01);a.o=a.n||a.m?p(t(a.o,-0.5),0.5):p(t(a.o,-0.1),0.1);qa=a.b-r*(0.5-a.o)}function Wa(a,b){a.h=t(-6,a.h-0.2*b);var c=a.c,d=a.h;a.floor&&a.floor.I.c&&4>P(a.k-a.floor.z-ca)&&(c+=a.floor.I.c,d+=a.floor.I.h);a.x+=c*b;a.z+=d*b}function Ya(a){f.R=1;u.button=a;q.clearRect(l/2,0,l/2,r);q.beginPath();q.arc(a[1],a[2],35,0,O);q.fill()}function Za(a){u.move=a;var b=a[1];a=a[2];q.clearRect(0,0,l/2,r);q.beginPath();q.arc(u.x,u.y,20,0,O);q.moveTo(u.x,
u.y);q.lineTo(b,a);q.arc(b,a,35,0,O);q.stroke();q.fill();b<u.x-15?(f.left=1,f.right=0,f.n=0,f.m=0):b>u.x+15?(f.left=0,f.right=1,f.n=0,f.m=0):(f.left=0,f.right=0);f.left||f.right||(a<u.y-15?(f.n=1,f.m=0):a>u.y+15?(f.n=0,f.m=1):(f.n=0,f.m=0));event.preventDefault()}function $a(a){E[a.keyCode]="keydown"==a.type;f.left=E[37];f.right=E[39];f.n=E[38];f.m=E[40];f.R=E[32];(32==a.keyCode||37<=a.keyCode&&40>=a.xa)&&a.preventDefault()}function wb(a){Va(a)}function xb(a,b){a.floor||(a.floor=Fa(a.x+z,a.y+z,a.z+
z,A),a.k=a.floor.z+z,DEBUG&&-1E7>a.k&&alert("Enemy must be above floor"));Wa(a,b);var c=0;0>a.c&&a.x+A<=a.floor.x?c=1:0<a.c&&a.x>a.floor.x+a.floor.e&&(c=2);if(0!=c){var d=Fa(a.x,a.y,a.z,A);a.floor!=d&&10>P(d.z-a.floor.z)&&(a.floor=d,a.k=a.floor.z+z);d!=a.floor&&(a.x=1==c?a.floor.x-A+1:a.floor.x+a.floor.e-1,a.c*=-1)}a.z<=a.k&&(a.z=a.k,a.h=2);if(c=Da(a.x,a.y,a.z,A,0<a.c?ra:sa))a.x=0<a.c?c.x-A:c.x+c.e+A,a.c*=-1;D(a);a.a-=z;a.b-=z/2;a.a+a.j-10>=f.a&&a.a+10<f.a+f.j&&a.b+a.g-10>=f.b&&a.b+10<f.b+f.g&&(180<
Q-C&&(w=0),V[w++].play(),w%=V.length,C=Q,ka())}function ab(a,b,c){a={x:a+z,y:IPY+z,z:b+z,f:L,c:c?c/-10:-1,h:0,f:A,e:A,d:A,j:L,g:L,B:A,i:wb,update:xb,color:Ga,face:"\u25d5` \u141f\u25d5 \u30ce",fa:"\u2054",ga:-8,ha:9};D(a);Ha||(Ha=oa(L,L,a,!0),bb=oa(L,L,a,!1));a.$=Ha;a.U=bb;I.push(a)}function yb(a,b,c,d,g,h,G){e.font=h+"pt "+g;var m=0;G=G.split("\n");v(G,function(a){m=t(m,e.measureText(a).width)});var cb=1.2*h*(G.length+1);a={x:a,z:b,y:Y,f:cb,e:m,d:0,g:cb,j:m,ra:G,X:1.2*h,color:c,stroke:d,oa:g,size:h,
s:function(a){e.font=a.size+"px "+a.oa;e.textAlign="center";e.fillStyle="#"+a.color;e.strokeStyle="#"+a.stroke;var b=a.X,c=a.e/2;v(a.ra,function(d){e.fillText(d,c,b);e.strokeText(d,c,b);b+=a.X})},i:function(a){var b=P(f.a-(a.a+a.j/2));if(!(b>a.j+100)){var c=P(f.b-(a.b+a.g/2));c>a.g+100||(R(t(0,p(1,1.4-c/(a.g+100)-b/(a.j+100)))),Ia(a),R(1))}}};D(a);da(a)}function Ab(a,b,c){a={x:a,z:b,y:IPY+10,f:c,e:10,d:0,g:c,j:10,Q:!1,i:function(a){e.fillStyle="#a73";e.fillRect(a.a,a.b,a.j,a.g);a.Q&&(Ja||(Ja=U(50,
30,function(a){a.fillStyle="#aaf";a.strokeStyle="#000";a.fillRect(0,0,50,30);a.strokeRect(0,0,50,30);a.fillStyle="#fe7";a.font="24px arial";a.drawImage(f.U,15,8,20,20);a.fillText("\u265b",12,12)})),e.drawImage(Ja,a.a-50,a.b))},update:function(a){!a.Q&&a.a>=f.a-4&&a.a<f.a+y+4&&a.b+a.g>=f.b-4&&a.b<f.b+y+4&&(3E3<Q-C&&(w=0),V[w++].play(),w%=V.length,C=Q,a.Q=!0,IPX=a.x,IPZ=a.z)}};D(a);da(a)}function Bb(a){var b={r:a,s:function(a){v(a.r,function(b){b.s(b,b.a-a.a,b.b-a.b)})},i:Ia,ka:function(a){v(a.r,function(a){D(a)});
db(a.r,a)}};db(a,b);da(b);return b}function db(a,b){var c,d,g,h,G,f,e,m,ta,l;c=d=g=h=G=Infinity;f=e=m=ta=l=-Infinity;v(a,function(a){h=p(h,a.a);ta=t(ta,a.a+a.j);G=p(G,a.b);l=t(l,a.b+a.g);c=p(c,a.x);f=t(f,a.x+a.e);d=p(d,a.y);e=t(e,a.y+a.d);g=p(g,a.z);m=t(m,a.z+a.f)});na(b,{a:h,b:G,j:ta-h+1,g:l-G+1,x:c,y:d,z:g,e:f-c+1,f:m-g+1,d:e-d+1})}function eb(a,b,c){e.setTransform(1,0,0,1,b||0,c||0);e.fillStyle=ea(190,190,190);e.strokeStyle=ea(40,40,40);e.lineWidth=1;for(b=a.d/2-5;0<=b;b-=10){c=a.g-b;e.beginPath();
for(var d=0;d<=a.e;d+=20)e.moveTo(d+b,c),e.lineTo(d+b+5,c-a.f),e.lineTo(d+b+10,c);e.stroke();e.fill()}}function ua(a){a.W.i(0,0,a.w,a.A);fb(a)}function va(a){var b=a.w,c=a.A,d=a.O,g=a.M,h=a.K;e.fillStyle=a.N;e.fillRect(0,0,b,c);e.strokeStyle=d;d=0;e.lineWidth=h/5;y0=0;y1=h;for(e.beginPath();y1<=c;){d++;e.moveTo(0,y1);e.lineTo(b,y1);for(x0=d&1?g:g/2;x0<b;)e.moveTo(x0,y0),e.lineTo(x0,y1),x0+=g;y0=y1;y1+=h}e.stroke();fb(a)}function Cb(a){var b=f;if(a.y+a.d<=b.y+3)return!1;if(b.y+b.d<=a.y+3||a.z+a.f<=
b.z+3||a.x+a.e<=b.x+3)return!0;if(b.z+b.f<=a.z+3||b.x+b.e<=a.x+3)return!1;ga("cubes intersection: ");return null}function R(a){a!=gb&&(gb=e.globalAlpha=a)}function fb(a){var b=a.L,c=a.w,d=a.A;b&15&&(e.strokeStyle=a.J,e.beginPath(),b&1&&(e.moveTo(0,0),e.lineTo(c,0)),b&2&&(e.moveTo(c,0),e.lineTo(c,d)),b&4&&(e.moveTo(c,d),e.lineTo(0,d)),b&8&&(e.moveTo(0,d),e.lineTo(0,0)),e.stroke())}function hb(a,b,c,d,g){var h=[],f=b+d,e=c+g;v(a,function(a){a.a+a.j>=b&&a.a<=f&&a.b+a.g-a.d/2>=c&&a.b-a.d/2<=e&&h.push(a)});
return h}function Ia(a){var b=M.indexOf(a.id);-1!=b?b<M.length-1&&(M.splice(b,1),M.push(a.id)):(50<=M.length&&(b=M.shift(),ga("Removing from cache cube "+b),delete wa[b]),M.push(a.id),b=U(a.j,a.g,function(b){var d=e;e=b;a.s(a);e=d}),ga("Adding to cache sprite "+a.id+"  X:"+a.x+" Y:"+a.y+" Z:"+a.z+" W:"+a.e+" H:"+a.f+" D:"+a.d),wa[a.id]=b);wa[a.id].i(a.a,a.b-a.d/2,a.j,a.g)}function Db(a,b,c){b=b||0;c=c||0;var d=a.d/2;a.P&&(e.setTransform(1,0,0,1,b,c+d),a.P.i(a.P));a.top&&(e.setTransform(1,0,-0.5,0.5,
b+0.4+d,c),a.top.i(a.top));a.right&&(e.setTransform(0.5,-0.5,0,1,b+a.e,c+d),a.right.i(a.right))}function da(a){a.id=Ka++;I.push(a)}function Fa(a,b,c,d){var g={z:-1E10};v(La,function(h){h.z>g.z&&c+d>h.z&&a+d>h.x&&a<h.x+h.e&&b+d>h.y&&b<h.y+h.d&&(g=h)});return g}function ib(a,b,c,d,g,h){na(a,{c:(d-b)/160*h/10,h:(g-c)/160*h/10,ca:t(c,g),ea:p(c,g),ba:t(b,d),da:p(b,d),update:function(a,b){var c=a.x,d=a.z;a.x+=a.c*b;if(a.x>a.ba||a.x<a.da)a.x=t(p(a.x,a.ba),a.da),a.c*=-1;a.z+=a.h*b;if(a.z>a.ca||a.z<a.ea)a.z=
t(p(a.z,a.ca),a.ea),a.h*=-1;c=a.x-c;d=a.z-d;v(a.r||[a],function(a){a.a+=c;a.b-=d;a=a.v;a.p&&(a.p.z+=d,a.p.x+=c,a.u.z+=d,a.u.x+=c);a.l&&(a.l.x+=c,a.l.z+=d,a.t.x+=c,a.t.z+=d)});a.r&&(a.a+=c,a.b-=d)}})}function Da(a,b,c,d,g){return Eb(g,function(g){if(a+d>g.x&&a<g.x+g.e&&b+d>g.y&&b<g.y+g.d&&c+d>g.z&&c<g.z+g.f)return g})}function Fb(a,b,c,d){var g,h,f,e;c>d?(g=p(c,40),h=d,f=0,e=p(d/5,10)):(g=c,h=p(d,40),f=p(c/5,20),e=0);for(var m=a;m+g<=a+c;m+=g)for(var l=b;l+h<=b+d;l+=h)S(m+(0+(f-0)*W()),l+(0+(e-0)*
W()),g,h),Ka--;Ka++;if(m!=a+c||l!=b+d)l==b+d?(c=c-m+a,a=m):(d=d-l+b,b=l),S(a+(0+(f-0)*W()),b+(0+(e-0)*W()),c,d)}function S(a,b,c,d){BH=BH||0.3*BW;var g={x:a,y:Y,z:b,e:c,f:d,d:m,j:c+m/2,g:d+m/2,s:Db,i:Ia};D(g);0<c&&0<d&&(g.P={N:Gb,O:Hb,W:Ib,w:c,A:d,M:BW,K:BH,J:BC,L:B,i:DR[0]||DR});0<m&&0<d&&(g.right={N:Jb,O:Kb,W:Lb,w:m,A:d,M:BW,K:BH,J:BC,L:B>>4,i:DR[1]||DR});0<c&&0<m&&(g.top={N:Mb,O:Nb,W:Ob,w:c,A:m,M:BW,K:BH,J:BC,L:B>>8,i:DR[2]||DR});da(g);if(Y+m<IPY||Y>IPY)a={};else{var h={};16<m&&16<d&&(h.p={y:Y,
z:b,d:m,f:d,e:0,x:a},ra.push(h.p),h.u={y:Y,z:b,d:m,f:d,e:0,x:a+c},sa.push(h.u));if(16<m&&16<c){h.l={x:a,y:Y,e:c,d:m,f:0,z:b+d,I:g};if(!g)debugger;La.push(h.l);h.t={x:a,y:Y,e:c,d:m,f:0,z:b};Ea.push(h.t)}a=h}g.v=a;return g}function D(a){a.a=a.x+a.y/2;a.b=r-a.y/2-a.f-a.z}function Ma(a){var b=e.createPattern(U(3*m,3*m,function(b){b.drawImage(a,0,0,3*m,3*m)}),"repeat");b.i=function(a,b,g,h){e.fillStyle=this;e.fillRect(a,b,g,h)};return b}function Na(a,b,c,d,g,h,f,e,m){b=a.createImageData(b,c);c=b.data;
for(var l=0;l<c.length;l+=4){var p=c,q=l,zb=d+W()*g,r=h+W()*f,n=e+W()*m;p[q]=zb;p[q+1]=r;p[q+2]=n;p[q+3]=255}a.putImageData(b,0,0)}function Pb(a,b){var c={x:a,z:b,y:IPY,f:10,e:10,d:0,g:10,j:10,ja:0+100*W()<<0,update:Qb,i:Rb,pa:!0};D(c);da(c)}function Sb(){v(Oa,function(a){for(var b=0;b<I.length;b++)if(I[b].id==a){I.splice(b,1);break}});Oa=[]}function Rb(a){e.drawImage(Pa[(Q+a.ja)%Pa.length],a.a-x/2,a.b-x/2)}function Qb(a){a.a>=f.a-4&&a.a<f.a+y+4&&a.b>=f.b-4&&a.b<f.b+y+4&&(3E3<Q-C&&(w=0),V[w++].play(),
w%=V.length,C=Q,Oa.push(a.id))}function fa(a){Qa.C.sa(a);var b=Qa.ua();a=new Uint8Array(4*((b+1)/2|0)+44);var b=2*Qa.ta(new Uint16Array(a.buffer,44),b),c=new Uint32Array(a.buffer,0,44);c[0]=1179011410;c[1]=b+36;c[2]=1163280727;c[3]=544501094;c[4]=16;c[5]=65537;c[6]=44100;c[7]=88200;c[8]=1048578;c[9]=1635017060;c[10]=b;for(var b=b+44,c=0,d="data:audio/wav;base64,";c<b;c+=3)var g=a[c]<<16|a[c+1]<<8|a[c+2],d=d+("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g>>18]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g>>
12&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g>>6&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g&63]);c-=b;a=new Audio;a.src=d.slice(0,d.length-c)+"==".slice(0,c);return a}function ga(a){DEBUG||alert("Forgot a log");console.log(a)}function jb(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=a[d];na(c,b);return c}function na(a,b){for(k in b)a[k]=b[k]}function ea(a,b,c,d){return"rgba("+a+","+b+","+c+","+(d||1)+")"}function U(a,b,c){var d=$.createElement("canvas");
d.width=a;d.height=b;c(d.getContext("2d"),d);d.i=function(a,b,c,d){e.drawImage(this,a,b,c,d)};return d}function Eb(a,b){return Tb(a.length,function(c){return b(a[c],c)})}function Tb(a,b){var c;c=c||1;for(var d=0;d<a;d+=c){var g=b(d);if(g)return g}}function Ra(a,b){var c;c=c||1;for(var d=0;d<a;d+=c)b(d)}function v(a,b){for(var c=0;c<a.length;c++)b(a[c],c)}function Ub(){this.sa=function(a){for(var b=0;24>b;b++)this[String.fromCharCode(97+b)]=a[b]||0;0.01>this.q&&(this.q=0.01);a=this.D+this.q+this.F;
0.18>a&&(a=0.18/a,this.D*=a,this.q*=a,this.F*=a)}}function kb(a){null==Sa&&(xa=Sa=a);Q=(xa-Sa)/16|0;var b=p(3,(a-xa)/16);xa=a;ya=0.9*ya+0.1*pa;K=lb(ya);za=0.9*za+0.1*qa;OffsetY=lb(za);e.setTransform(1,0,0,1,0-K,0-OffsetY);e.clearRect(K,OffsetY,l,r);a=hb(I,K-l/2,OffsetY-r/2,2*l,2*r);f.update(f,b);v(a,function(a){a.update&&a.update(a,b)});mb=hb(a,K,OffsetY,l,r);var c=[],d=[];v(mb,function(a){Cb(a)?c.push(a):d.push(a)});v(c,function(a){a.i(a)});f.i();v(d,function(a){a.pa?R(1):a.a-10<f.a+f.j&&a.a+10+
a.j>f.a&&a.y+a.d<f.y&&a.b-10<f.b+f.g&&a.b+10+a.g>f.b?R(0.3):R(1);a.i(a)});R(1);Sb();Aa(kb)}DEBUG=!0;onerror=function(a,b,c){alert(a,b,c)};var $=document,T=[];v(["b","c","d"],function(a){T.push($.getElementById(a))});var l=T[0].width,r=T[0].height,nb=T[1].getContext("2d"),e=nb,N=T[0].getContext("2d"),q=T[2].getContext("2d"),W=Math.random,P=Math.abs,p=Math.min,t=Math.max,lb=Math.round,O=2*Math.PI,I=[],u=0;BgCStyle="#222";N.fillStyle=BgCStyle;N.fillRect(0,0,l,r);var v=function(a,b){for(var c=0;c<a.length;c++)b(a[c],
c)},Aa=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame;if(!Aa)var ob=0,Aa=function(a){var b=Date.now(),c=Math.max(0,16-(b-ob));window.setTimeout(function(){a(b+c)},c);ob=b+c};var ya,za,K=OffsetY=0,pb=ea(15,15,15,0.3);BW=27;BH=0;B=4095;BC=pb;var Qa=new function(){this.C=new Ub;var a,b,c,d,g,h,f,e,m,l,p,q;this.reset=function(){var a=this.C;d=100/(a.na*a.na+0.001);g=100/(a.Y*a.Y+0.001);h=1-0.01*a.f*a.f*a.f;f=1E-6*-a.Z*a.Z*a.Z;a.ma||(p=0.5-a.ya/2,q=5E-5*
-a.za);e=0<a.G?1-0.9*a.G*a.G:1+10*a.G*a.G;m=0;l=1==a.aa?0:2E4*(1-a.aa)*(1-a.aa)+32};this.ua=function(){this.reset();var d=this.C;a=1E5*d.D*d.D;b=1E5*d.q*d.q;c=1E5*d.F*d.F+10;return a+b+c|0};this.ta=function(r,v){var n=this.C,u=1!=n.H||n.la,t=0.1*n.la*n.la,A=1+3E-4*n.e,F=0.1*n.H*n.H*n.H,w=1+1E-4*n.ja,y=1!=n.H,I=n.x*n.x,D=n.Y,z=n.S||n.T,T=0.2*n.T*n.T*n.T,K=n.S*n.S*(0>n.S?-1020:1020),O=n.ia?(2E4*(1-n.ia)*(1-n.ia)|0)+32:0,U=n.d,Q=n.wa/2,V=0.01*n.qa*n.qa,L=n.ma,M=a,W=1/a,ca=1/b,ea=1/c,n=5/(1+20*n.va*n.va)*
(0.01+F);0.8<n&&(n=0.8);for(var n=1-n,S=!1,ba=0,E=0,C=0,R=0,x=0,N,la=0,J,ha=0,ja,da=0,s,ga=0,ia,fa=0,$=Array(1024),ma=Array(32),aa=$.length;aa--;)$[aa]=0;for(aa=ma.length;aa--;)ma[aa]=2*Math.random()-1;for(aa=0;aa<v;aa++){if(S)return aa;O&&++ga>=O&&(ga=0,this.reset());l&&++m>=l&&(l=0,d*=e);h+=f;d*=h;d>g&&(d=g,0<D&&(S=!0));J=d;0<Q&&(fa+=V,J*=1+Math.sin(fa)*Q);J|=0;8>J&&(J=8);L||(p+=q,0>p?p=0:0.5<p&&(p=0.5));if(++E>M)switch(E=0,++ba){case 1:M=b;break;case 2:M=c}switch(ba){case 0:C=E*W;break;case 1:C=
1+2*(1-E*ca)*U;break;case 2:C=1-E*ea;break;case 3:C=0,S=!0}z&&(K+=T,ja=K|0,0>ja?ja=-ja:1023<ja&&(ja=1023));u&&A&&(t*=A,1E-5>t?t=1E-5:0.1<t&&(t=0.1));ia=0;for(var ka=8;ka--;){ha++;if(ha>=J&&(ha%=J,3==L))for(N=ma.length;N--;)ma[N]=2*Math.random()-1;switch(L){case 0:s=ha/J<p?0.5:-0.5;break;case 1:s=1-2*(ha/J);break;case 2:s=ha/J;s=6.28318531*(0.5<s?s-1:s);s=0>s?1.27323954*s+0.405284735*s*s:1.27323954*s-0.405284735*s*s;s+=0.225*(s*P(s)-s);break;case 3:s=ma[Math.abs(32*ha/J|0)]}u&&(N=la,F*=w,0>F?F=0:0.1<
F&&(F=0.1),y?(x+=(s-la)*F,x*=n):(la=s,x=0),la+=x,R+=la-N,s=R*=1-t);z&&($[da%1024]=s,s+=$[(da-ja+1024)%1024],da++);ia+=s}ia=0.125*ia*C*I;r[aa]=1<=ia?32767:-1>=ia?-32768:32767*ia|0}return v}},qb=[0,,0.14,0.445,0.4616,0.6,,,,,,0.587,0.5406,,,,,,1,,,,,0.45],V=[];Ra(5,function(a){V.push(fa(jb(qb,{5:0.6+0.05*a})))});Ra(4,function(a){V.push(fa(jb(qb,{5:0.8-0.05*a})))});var w=0,C=0,Oa=[],x=80,Pa=[];Ra(128,function(a){var b=P(Math.sin(O*a/128));0.1<b&&Pa.push(U(x,x,function(c){c.strokeStyle="#aa6";c.shadowBlur=
30;c.lineWidth=2;c.shadowColor="#ff2";c.beginPath();c.setTransform(b,0,0,1,x/2,x/2);c.fillStyle="#fe4";c.arc(0,0,10,0,O);c.fill();c.fillStyle="#aa6";63<a?c.fillText("1",-3,3.5):c.fillText("\u265b",-5,3.5);c.stroke()}))});var m=20,Vb=U(m,m,function(a){Na(a,m,m,80,20,180,40,80,40)}),Wb=U(m,m,function(a){Na(a,m,m,120,20,110,20,40,30)}),Xb=U(m,m,function(a){Na(a,m,m,140,25,120,25,50,40)}),Ob=Ma(Vb),Ib=Ma(Wb),Lb=Ma(Xb),pa=0,qa=0,ra,sa,La,Ea,wa,M,Ka=0,Mb="#e86",Nb="#eda",Gb="#d74",Hb="#dc8",Jb="#b52",Kb=
"#ba6",gb=1,Ja=0,bb,Ha=!1,Ga=e.createRadialGradient(15,-9,3,15,-9,32);Ga.addColorStop(0,"#FFD6CE");Ga.addColorStop(1,"#B34C80");var A=22,L=2*A,z=L/4,E={};$.addEventListener("keydown",$a);$.addEventListener("keyup",$a);$.body.addEventListener("touchmove",function(a){a.preventDefault()},!1);q.fillStyle=ea(140,150,240,0.5);q.shadowColor=ea(170,180,250,0.5);q.shadowBlur=30;q.lineWidth=7;q.strokeStyle=ea(80,90,140,0.5);var ba=T[2];ba.addEventListener("touchstart",function(a){var b=null,c=null;v(a.changedTouches,
function(a){var g=a.clientX-ba.offsetLeft,h=a.clientY-ba.offsetTop;g<l/2-20?b=[a.identifier,g,h]:g>l/2+20&&(c=[a.identifier,g,h])});null!=b&&Za(b);null!=c&&Ya(c);a.preventDefault()});ba.addEventListener("touchmove",function(a){var b=null,c=null;v(a.changedTouches,function(a){var g=a.clientX-ba.offsetLeft,h=a.clientY-ba.offsetTop;g<l/2-20?b=[a.identifier,g,h]:g>l/2+20&&(c=[a.identifier,g,h])});null!=b&&Za(b);null!=c&&Ya(c);a.preventDefault()});ba.addEventListener("touchend",function(a){v(a.changedTouches,
function(a){null!=u.move&&a.identifier==u.move[0]&&(u.move=null,f.left=0,f.right=0,f.n=0,f.m=0,q.beginPath(),q.clearRect(0,0,l/2,r),q.arc(u.x,u.y,30,0,O),q.fill());null!=u.button&&a.identifier==u.button[0]&&(u.button=null,f.R=0,q.clearRect(l/2,0,l/2,r))})});var Ba=e.createRadialGradient(12,-7,3,12,-7,28);Ba.addColorStop(0,"#8ED6FF");Ba.addColorStop(1,"#004CB3");var y=40,ca=y/4,ub=fa([0,,0.1453,,0.225,0.3726,,0.12,0.22,,,,,0.1547,,,,,1,,,,,0.35]),vb=fa([0,,0.1,,0.22,0.3726,,0.14,0.2,,,,0.12,0.1547,
,,,,1,,,,,0.26]),Xa=fa([0,,0.11,0.16,0.09,0.227,0.04,-0.18,0.34,,,,,0.23,0.12,,,,1,0.2,0.16,0.1,,0.32]),tb=ea(15,15,15,0.5),Ua,Ca=!1,f={};Ta();(function(a){I=[];ra=[];sa=[];La=[];Ea=[];K=OffsetY=0;M=[];wa={};IPX=0;IPY=50;IPZ=0;BW=27;BC=pb;B=4095;Y=0;m=100;for(var b=0;b<a.length;){var c=a[b++];switch(c){case 0:IPX=a[b++];IPZ=a[b++];ka();break;case 1:Pb(a[b++],a[b++]);break;case 2:ab(a[b++],a[b++]);break;case 3:case 4:DR=3==c?va:ua;S(a[b++],a[b++],a[b++],a[b++]);break;case 10:var d=S(a[b++],a[b++],
a[b++],a[b++]);d.v.l.V=!0;d.s=eb;break;case 5:Y=a[b++];m=a[b++];break;case 11:var g=a[b++],h=a[b++],f=a[b++],e=a[b++],l=a[b++];case 6:var q=a;a=a[b++];var r=b,u=[],A=I;I=u;var w,n;if(11==c){var y=1E7,z=y;n=w=-1E7;for(b=0;b<a.length;){b++;var d=a[b++],x=a[b++],y=p(y,d),z=p(z,x);w=t(w,d+a[b++]);n=t(n,x+a[b++])}w=w-y+1;n=n-z+1;h-=n;e-=n;n/=2}for(b=0;b<a.length;){var x=a[b++],d=a[b++],F=a[b++],D=a[b++],E=a[b++];11==c&&(d=d-y+g-w,F=F-z+h-n);switch(x){case 3:case 4:DR=3==x?va:ua;S(d,F,D,E);break;case 10:d=
S(d,F,D,E);d.v.l.V=!0;d.s=eb;break;default:ga("Error loading level at index "+r+"  subindex "+b+" type: "+x)}}a=q;b=r;I=A;var C=Bb(u);11==c&&(v(C.r,function(a){a.v.l&&(a.v.l.I=C)}),ib(C,g-w,h-n,f-w,e-n,l));break;case 7:case 8:DR=7==c?va:ua;g=a[b++];h=a[b++];f=a[b++];e=a[b++];c=a[b++];q=a[b++];l=a[b++];d=g-c/2;F=h-q/2;d=S(d,F,c,q);ib(d,g,h,f,e,l);break;case 9:ab(a[b++],a[b++],a[b++]);break;case 12:case 13:DR=12==c?va:ua;Fb(a[b++],a[b++],a[b++],a[b++]);break;case 14:yb(a[b++],a[b++],a[b++],a[b++],a[b++],
a[b++],a[b++]);break;case 15:Ab(a[b++],a[b++],a[b++]);break;default:ga("Error loading level at index "+b+"  type: "+c)}}})(test_lvl);window.onresize=function(){var a=T[0].parentElement,b=l,c=r;l=p(960,a.offsetWidth);r=p(760,a.offsetHeight);var d=a.offsetLeft+(a.offsetWidth-l)/2+"px";v(T,function(a){a.style.top=0;a.style.left=d;if(b!=l||c!=r)a.width=l,a.height=r});N.fillStyle=BgCStyle;N.fillRect(0,0,l,r);if(b!=l||c!=r)v(I,function(a){a.ka?a.ka(a):D(a)}),Ta()};onresize();navigator.userAgent.match(/Android/i)&&
(window.scrollTo(0,1),N.fillStyle=BgCStyle,N.fillRect(0,0,l,r));ya=pa=f.a-0.5*l;za=qa=f.b-0.8*r;var e=nb,Sa=null,Q,xa,mb=[];Aa(kb)})();

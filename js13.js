(function(){function Wa(){t={x:0.15*n,y:0.8*p,move:null,button:null}}function ia(){na(f,{x:IPX+K,y:IPY+K,z:IPZ+K,c:0,Ba:0,g:0,f:20,e:20,d:20,j:w,h:w,r:20,i:Ca,color:Da,face:"\uff61\u25d5  \u25d5\uff61",V:"\u203f",W:-5,X:5,update:rb,o:-0.2});Ea||(Ea=L(w,w,f,!0),Xa=L(w,w,f,!1));f.U=Ea;f.I=Xa;z(f);oa=f.b-0.5*n;pa=f.a-0.7*p}function Ca(a){e.save();-1E7<a.k&&(e.setTransform(1,0,0,0.3,a.b+a.r-4-M,a.a-a.k+a.z+2*a.r-1-OffsetY),e.beginPath(),e.arc(0,0,a.r,0,R),e.fillStyle=sb,e.fill());e.setTransform(1,0,0,
1,a.b-M,a.a-OffsetY);e.drawImage(0>a.c?a.U:a.I,0,0);e.restore()}function L(a,b,c,d){return A(a,b,function(a){var b=c.r;a.translate(b,b);a.lineWidth=1;a.strokeStyle="#111";a.fillStyle=c.color;a.beginPath();a.arc(0,0,b,0,R);a.fill();a.scale(d?1:-1,1);a.fillStyle="#222";a.fillText(c.face,-15,1);a.fillText(c.V,c.W,c.X);a.stroke()})}function rb(a,b){var c=a.left,d=a.right,g=a.T,l=0.22*b;a.c=c?a.c-l:d?a.c+l:a.c*Math.pow(0.9,b);l=g?3.5:2.5;if(C(a.c)>l){var e=Math.pow(0.95,b);a.c=0>a.c?x(a.c*e,-l):q(a.c*
e,l)}Fa(a,b);0<a.g&&(l=Ga(a.x,a.y,a.z,20,Ha))&&(Ya.play(),a.z=l.z-20,a.g*=-0.8);-1E3>a.z&&ia();l=qa(a.x,a.y,a.z,20);a.k=-Infinity;if(l.d){if(a.floor=l,a.k=l.z+K,a.z<=a.k||!a.floor.$&&g&&5>a.z-a.k&&2>C(a.g)){if(a.floor.$&&0>a.g){ia();return}-2>a.g||g?tb.play():-1>a.g&&ub.play();a.z=a.k;a.g=g?q(C(a.g/2),6):q(C(a.g/2),C(a.c)/1.5)}}else a.floor=!1;if(l=Ga(a.x,a.y,a.z,20,0<a.c?ra:sa))a.x=0<a.c?l.x-20:l.x+l.e+20,Ya.play(),a.c=10<a.z-a.k?-0.2*a.c:-0.8*a.c;z(a);a.b-=K;a.a-=K/2;if(c||d)oa=a.b-n*(0.5-a.c/20);
a.n&&(a.o-=0.01);a.m&&(a.o+=0.01);a.o=a.n||a.m?x(q(a.o,-0.5),0.5):x(q(a.o,-0.1),0.1);pa=a.a-p*(0.5-a.o)}function Fa(a,b){a.g=q(-9,a.g-0.2*b);var c=a.c,d=a.g;a.floor&&a.floor.K.c&&4>C(a.k-a.floor.z-K)&&(c+=a.floor.K.c,d+=a.floor.K.g);a.x+=c*b;a.z+=d*b}function Za(a){f.T=1;t.button=a;r.clearRect(n/2,0,n/2,p);r.beginPath();r.arc(a[1],a[2],35,0,R);r.fill()}function $a(a){t.move=a;var b=a[1];a=a[2];r.clearRect(0,0,n/2,p);r.beginPath();r.arc(t.x,t.y,20,0,R);r.moveTo(t.x,t.y);r.lineTo(b,a);r.arc(b,a,35,
0,R);r.stroke();r.fill();b<t.x-15?(f.left=1,f.right=0,f.n=0,f.m=0):b>t.x+15?(f.left=0,f.right=1,f.n=0,f.m=0):(f.left=0,f.right=0);f.left||f.right||(a<t.y-15?(f.n=1,f.m=0):a>t.y+15?(f.n=0,f.m=1):(f.n=0,f.m=0));event.preventDefault()}function ab(a){S[a.keyCode]="keydown"==a.type;f.left=S[37];f.right=S[39];f.n=S[38];f.m=S[40];f.T=S[32];(32==a.keyCode||37<=a.keyCode&&40>=a.ya)&&a.preventDefault()}function vb(a,b){a.floor||(a.floor=qa(a.x+y,a.y+y,a.z+y,v),a.k=a.floor.z+y,DEBUG&&-1E7>a.k&&alert("Enemy must be above floor"));
Fa(a,b);var c=0;0>a.c&&a.x+v<=a.floor.x?c=1:0<a.c&&a.x>a.floor.x+a.floor.e&&(c=2);if(0!=c){var d=qa(a.x,a.y,a.z,v);a.floor!=d&&10>C(d.z-a.floor.z)&&(a.floor=d,a.k=a.floor.z+y);d!=a.floor&&(a.x=1==c?a.floor.x-v+1:a.floor.x+a.floor.e-1,a.c*=-1)}a.z<=a.k&&(a.z=a.k,a.g=2);if(c=Ga(a.x,a.y,a.z,v,0<a.c?ra:sa))a.x=0<a.c?c.x-v:c.x+c.e+v,a.c*=-1;z(a);a.b-=y;a.a-=y/2;a.b+a.j-10>=f.b&&a.b+10<f.b+f.j&&a.a+a.h-10>=f.a&&a.a+10<f.a+f.h&&(180<N-X&&(D=0),T[D++].play(),D%=T.length,X=N,ia())}function bb(a,b,c){a={x:a+
y,y:IPY+y,z:b+y,f:O,c:c?c/-10:-1,g:0,f:v,e:v,d:v,j:O,h:O,r:v,i:Ca,update:vb,color:Ia,face:"\u25d5` \u141f\u25d5 \u30ce",V:"\u2054",W:-8,X:9};z(a);Ja||(Ja=L(O,O,a,!0),cb=L(O,O,a,!1));a.U=Ja;a.I=cb;I.push(a)}function wb(a,b){var c={x:a+16,y:IPY+16,z:b+16,f:64,c:0,g:4,f:32,e:32,d:32,j:64,h:64,r:32,i:function(a){e.strokeStyle="#221";e.fillRect(0,0,50,30);e.strokeRect(0,0,50,30);e.fillStyle="#fe7";e.font="36px arial";e.fillText("\u265b",a.b+15,a.a+2);Ca(a)},update:function(a,b){a.floor||(a.floor=qa(a.x+
16,a.y+16,a.z+16,32),a.k=a.floor.z+16,DEBUG&&-1E7>a.k&&alert("King must be above floor"));Fa(a,b);a.z<=a.k&&(a.z=a.k,a.g=C(a.g));z(a);a.b-=16;a.a-=8},color:Ka,face:"\u0ca0 \u0c8e \u0ca0",V:"\u2054",W:-8,X:9};z(c);ta||(ta=L(64,64,c,!0));c.U=ta;c.I=ta;I.push(c)}function xb(a,b,c,d,g,l,la){e.font=l+"pt "+g;var h=0;la=la.split("\\n");u(la,function(a){h=q(h,e.measureText(a).width)});var ga=1.2*l*(la.length+1);a={x:a,z:b,y:Y,f:ga,e:h,d:0,h:ga,j:h,sa:la,ba:1.2*l,color:c,stroke:d,pa:g,size:l,t:function(a){e.font=
a.size+"px "+a.pa;e.textAlign="center";e.fillStyle="#"+a.color;e.strokeStyle="#"+a.stroke;var b=a.ba,c=a.e/2;u(a.sa,function(d){e.fillText(d,c,b);e.strokeText(d,c,b);b+=a.ba})},i:function(a){var b=C(f.b-(a.b+a.j/2));if(!(b>a.j+100)){var c=C(f.a-(a.a+a.h/2));c>a.h+100||(F(q(0,x(1,1.4-c/(a.h+100)-b/(a.j+100)))),La(a),F(1))}}};z(a);Z(a)}function zb(a,b,c){a={x:a,z:b,y:IPY+10,f:c,e:10,d:0,h:c,j:10,S:!1,C:-1,i:function(a){e.fillStyle="#a73";e.fillRect(a.b,a.a,a.j,a.h);a.S&&(Ma||(Ma=A(50,30,function(a){a.fillStyle=
"#aaf";a.strokeStyle="#000";a.fillRect(0,0,50,30);a.strokeRect(0,0,50,30);a.fillStyle="#fe7";a.font="24px arial";a.fillText("\u265b",12,12);a.drawImage(f.I,15,8,20,20)})),a.C>a.a&&(a.C-=2),e.drawImage(Ma,a.b-50,a.C))},update:function(a){!a.S&&a.b>=f.b-4&&a.b<f.b+w+4&&a.a+a.h>=f.a-4&&a.a<f.a+w+4&&(3E3<N-X&&(D=0),T[D++].play(),D%=T.length,X=N,a.C=a.a+a.h-30,a.S=!0,IPX=a.x,IPZ=a.z)}};z(a);Z(a)}function Ab(a){var b={s:a,t:function(a){u(a.s,function(b){b.t(b,b.b-a.b,b.a-a.a)})},i:La,la:function(a){u(a.s,
function(a){z(a)});db(a.s,a)}};db(a,b);Z(b);return b}function db(a,b){var c,d,g,l,e,f,ga,h,ua,n;c=d=g=l=e=Infinity;f=ga=h=ua=n=-Infinity;u(a,function(a){l=x(l,a.b);ua=q(ua,a.b+a.j);e=x(e,a.a);n=q(n,a.a+a.h);c=x(c,a.x);f=q(f,a.x+a.e);d=x(d,a.y);ga=q(ga,a.y+a.d);g=x(g,a.z);h=q(h,a.z+a.f)});na(b,{b:l,a:e,j:ua-l+1,h:n-e+1,x:c,y:d,z:g,e:f-c+1,f:h-g+1,d:ga-d+1})}function eb(a,b,c){e.setTransform(1,0,0,1,b||0,c||0);e.fillStyle=$(190,190,190);e.strokeStyle=$(40,40,40);e.lineWidth=1;for(b=a.d/2-5;0<=b;b-=
10){c=a.h-b;e.beginPath();for(var d=0;d<=a.e;d+=20)e.moveTo(d+b,c),e.lineTo(d+b+5,c-a.f),e.lineTo(d+b+10,c);e.stroke();e.fill()}}function va(a){a.aa.i(0,0,a.A,a.B);fb(a)}function wa(a){var b=a.A,c=a.B,d=a.Q,g=a.O,l=a.M;e.fillStyle=a.P;e.fillRect(0,0,b,c);e.strokeStyle=d;d=0;e.lineWidth=l/5;y0=0;y1=l;for(e.beginPath();y1<=c;){d++;e.moveTo(0,y1);e.lineTo(b,y1);for(x0=d&1?g:g/2;x0<b;)e.moveTo(x0,y0),e.lineTo(x0,y1),x0+=g;y0=y1;y1+=l}e.stroke();fb(a)}function Bb(a){var b=f;if(a.y+a.d<=b.y+3)return!1;
if(b.y+b.d<=a.y+3||a.z+a.f<=b.z+3||a.x+a.e<=b.x+3)return!0;if(b.z+b.f<=a.z+3||b.x+b.e<=a.x+3)return!1;da("cubes intersection: ");return null}function F(a){a!=gb&&(gb=e.globalAlpha=a)}function fb(a){var b=a.N,c=a.A,d=a.B;b&15&&(e.strokeStyle=a.L,e.beginPath(),b&1&&(e.moveTo(0,0),e.lineTo(c,0)),b&2&&(e.moveTo(c,0),e.lineTo(c,d)),b&4&&(e.moveTo(c,d),e.lineTo(0,d)),b&8&&(e.moveTo(0,d),e.lineTo(0,0)),e.stroke())}function hb(a,b,c,d,g){var l=[],e=b+d,f=c+g;u(a,function(a){a.b+a.j>=b&&a.b<=e&&a.a+a.h-a.d/
2>=c&&a.a-a.d/2<=f&&l.push(a)});return l}function La(a){var b=U.indexOf(a.id);-1!=b?b<U.length-1&&(U.splice(b,1),U.push(a.id)):(50<=U.length&&(b=U.shift(),da("Removing from cache cube "+b),delete xa[b]),U.push(a.id),b=A(a.j,a.h,function(b){var d=e;e=b;a.t(a);e=d}),da("Adding to cache sprite "+a.id+"  X:"+a.x+" Y:"+a.y+" Z:"+a.z+" W:"+a.e+" H:"+a.f+" D:"+a.d),xa[a.id]=b);xa[a.id].i(a.b,a.a-a.d/2,a.j,a.h)}function Cb(a,b,c){b=b||0;c=c||0;var d=a.d/2;a.R&&(e.setTransform(1,0,0,1,b,c+d),a.R.i(a.R));a.top&&
(e.setTransform(1,0,-0.5,0.5,b+0.4+d,c),a.top.i(a.top));a.right&&(e.setTransform(0.5,-0.5,0,1,b+a.e,c+d),a.right.i(a.right))}function Z(a){a.id=Na++;I.push(a)}function qa(a,b,c,d){var g={z:-1E10};u(Oa,function(l){l.z>g.z&&c+d>l.z&&a+d>l.x&&a<l.x+l.e&&b+d>l.y&&b<l.y+l.d&&(g=l)});return g}function ib(a,b,c,d,g,l){na(a,{c:(d-b)/160*l/10,g:(g-c)/160*l/10,ga:q(c,g),ia:x(c,g),fa:q(b,d),ha:x(b,d),update:function(a,b){var c=a.x,d=a.z;a.x+=a.c*b;if(a.x>a.fa||a.x<a.ha)a.x=q(x(a.x,a.fa),a.ha),a.c*=-1;a.z+=a.g*
b;if(a.z>a.ga||a.z<a.ia)a.z=q(x(a.z,a.ga),a.ia),a.g*=-1;c=a.x-c;d=a.z-d;u(a.s||[a],function(a){a.b+=c;a.a-=d;a=a.w;a.p&&(a.p.z+=d,a.p.x+=c,a.v.z+=d,a.v.x+=c);a.l&&(a.l.x+=c,a.l.z+=d,a.u.x+=c,a.u.z+=d)});a.s&&(a.b+=c,a.a-=d)}})}function Ga(a,b,c,d,g){return Db(g,function(g){if(a+d>g.x&&a<g.x+g.e&&b+d>g.y&&b<g.y+g.d&&c+d>g.z&&c<g.z+g.f)return g})}function Eb(a,b,c,d){var g,l,e,f;c>d?(g=x(c,40),l=d,e=0,f=q(d/5,10)):(g=c,l=x(d,40),e=q(c/5,20),f=0);for(var h=a;h+g<=a+c;h+=g)for(var n=b;n+l<=b+d;n+=l)aa(h+
(0+(e-0)*G()),n+(0+(f-0)*G()),g,l),Na--;Na++;if(h!=a+c||n!=b+d)n==b+d?(c=c-h+a,a=h):(d=d-n+b,b=n),aa(a+(0+(e-0)*G()),b+(0+(f-0)*G()),c,d)}function aa(a,b,c,d){BH=BH||0.3*BW;var g={x:a,y:Y,z:b,e:c,f:d,d:h,j:c+h/2,h:d+h/2,t:Cb,i:La};z(g);0<c&&0<d&&(g.R={P:Fb,Q:Gb,aa:Hb,A:c,B:d,O:BW,M:BH,L:BC,N:B,i:DR[0]||DR});0<h&&0<d&&(g.right={P:Ib,Q:Jb,aa:Kb,A:h,B:d,O:BW,M:BH,L:BC,N:B>>4,i:DR[1]||DR});0<c&&0<h&&(g.top={P:Lb,Q:Mb,aa:Nb,A:c,B:h,O:BW,M:BH,L:BC,N:B>>8,i:DR[2]||DR});Z(g);if(Y+h<IPY||Y>IPY)a={};else{var e=
{};16<h&&16<d&&(e.p={y:Y,z:b,d:h,f:d,e:0,x:a},ra.push(e.p),e.v={y:Y,z:b,d:h,f:d,e:0,x:a+c},sa.push(e.v));if(16<h&&16<c){e.l={x:a,y:Y,e:c,d:h,f:0,z:b+d,K:g};if(!g)debugger;Oa.push(e.l);e.u={x:a,y:Y,e:c,d:h,f:0,z:b};Ha.push(e.u)}a=e}g.w=a;return g}function z(a){a.b=a.x+a.y/2;a.a=p-a.y/2-a.f-a.z}function Pa(a){var b=e.createPattern(A(3*h,3*h,function(b){b.drawImage(a,0,0,3*h,3*h)}),"repeat");b.i=function(a,b,g,f){e.fillStyle=this;e.fillRect(a,b,g,f)};return b}function Qa(a,b,c,d,g,e,f,h,n){b=a.createImageData(b,
c);c=b.data;for(var r=0;r<c.length;r+=4){var p=c,q=r,yb=d+G()*g,u=e+G()*f,m=h+G()*n;p[q]=yb;p[q+1]=u;p[q+2]=m;p[q+3]=255}a.putImageData(b,0,0)}function Ob(a,b){var c={x:a,z:b,y:IPY,f:10,e:10,d:0,h:10,j:10,ka:0+100*G()<<0,update:Pb,i:Qb,qa:!0};z(c);Z(c)}function Rb(){u(Ra,function(a){for(var b=0;b<I.length;b++)if(I[b].id==a){I.splice(b,1);break}});Ra=[]}function Qb(a){e.drawImage(Sa[(N+a.ka)%Sa.length],a.b-E/2,a.a-E/2)}function Pb(a){a.b>=f.b-4&&a.b<f.b+w+4&&a.a>=f.a-4&&a.a<f.a+w+4&&(3E3<N-X&&(D=0),
T[D++].play(),D%=T.length,X=N,Ra.push(a.id))}function ba(a){Ta.D.ta(a);var b=Ta.va();a=new Uint8Array(4*((b+1)/2|0)+44);var b=2*Ta.ua(new Uint16Array(a.buffer,44),b),c=new Uint32Array(a.buffer,0,44);c[0]=1179011410;c[1]=b+36;c[2]=1163280727;c[3]=544501094;c[4]=16;c[5]=65537;c[6]=44100;c[7]=88200;c[8]=1048578;c[9]=1635017060;c[10]=b;for(var b=b+44,c=0,d="data:audio/wav;base64,";c<b;c+=3)var g=a[c]<<16|a[c+1]<<8|a[c+2],d=d+("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g>>18]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g>>
12&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g>>6&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g&63]);c-=b;a=new Audio;a.src=d.slice(0,d.length-c)+"==".slice(0,c);return a}function da(a){DEBUG||alert("Forgot a log");console.log(a)}function jb(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=a[d];na(c,b);return c}function na(a,b){for(k in b)a[k]=b[k]}function $(a,b,c,d){return"rgba("+a+","+b+","+c+","+(d||1)+")"}function A(a,b,c){var d=V.createElement("canvas");
d.width=a;d.height=b;c(d.getContext("2d"),d);d.i=function(a,b,c,d){e.drawImage(this,a,b,c,d)};return d}function Db(a,b){return Sb(a.length,function(c){return b(a[c],c)})}function Sb(a,b){var c;c=c||1;for(var d=0;d<a;d+=c){var g=b(d);if(g)return g}}function Ua(a,b){var c;c=c||1;for(var d=0;d<a;d+=c)b(d)}function u(a,b){for(var c=0;c<a.length;c++)b(a[c],c)}function Tb(){this.ta=function(a){for(var b=0;24>b;b++)this[String.fromCharCode(97+b)]=a[b]||0;0.01>this.q&&(this.q=0.01);a=this.F+this.q+this.G;
0.18>a&&(a=0.18/a,this.F*=a,this.q*=a,this.G*=a)}}function kb(a){null==Va&&(ya=Va=a);N=(ya-Va)/16|0;var b=x(3,(a-ya)/16);ya=a;za=0.9*za+0.1*oa;M=lb(za);Aa=0.9*Aa+0.1*pa;OffsetY=lb(Aa);e.setTransform(1,0,0,1,0-M,0-OffsetY);e.clearRect(M,OffsetY,n,p);a=hb(I,M-n/2,OffsetY-p/2,2*n,2*p);f.update(f,b);u(a,function(a){a.update&&a.update(a,b)});mb=hb(a,M,OffsetY,n,p);var c=[],d=[];u(mb,function(a){Bb(a)?c.push(a):d.push(a)});u(c,function(a){a.i(a)});f.i(f);u(d,function(a){a.qa?F(1):a.b-10<f.b+f.j&&a.b+10+
a.j>f.b&&a.y+a.d<f.y&&a.a-10<f.a+f.h&&a.a+10+a.h>f.a?F(0.3):F(1);a.i(a)});F(1);Rb();Ba(kb)}DEBUG=!0;onerror=function(a,b,c){alert(a,b,c)};var V=document,P=[];u(["b","c","d"],function(a){P.push(V.getElementById(a))});var n=P[0].width,p=P[0].height,nb=P[1].getContext("2d"),e=nb,Q=P[0].getContext("2d"),r=P[2].getContext("2d"),G=Math.random,C=Math.abs,x=Math.min,q=Math.max,lb=Math.round,R=2*Math.PI,I=[],t=0;BgCStyle="#222";Q.fillStyle=BgCStyle;Q.fillRect(0,0,n,p);var u=function(a,b){for(var c=0;c<a.length;c++)b(a[c],
c)},Ba=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame;if(!Ba)var ob=0,Ba=function(a){var b=Date.now(),c=Math.max(0,16-(b-ob));window.setTimeout(function(){a(b+c)},c);ob=b+c};var za,Aa,M=OffsetY=0,pb=$(15,15,15,0.3);BW=27;BH=0;B=4095;BC=pb;var Ta=new function(){this.D=new Tb;var a,b,c,d,e,f,h,n,r,p,q,u;this.reset=function(){var a=this.D;d=100/(a.oa*a.oa+0.001);e=100/(a.ca*a.ca+0.001);f=1-0.01*a.f*a.f*a.f;h=1E-6*-a.da*a.da*a.da;a.na||(q=0.5-a.za/2,
u=5E-5*-a.Aa);n=0<a.H?1-0.9*a.H*a.H:1+10*a.H*a.H;r=0;p=1==a.ea?0:2E4*(1-a.ea)*(1-a.ea)+32};this.va=function(){this.reset();var d=this.D;a=1E5*d.F*d.F;b=1E5*d.q*d.q;c=1E5*d.G*d.G+10;return a+b+c|0};this.ua=function(x,t){var m=this.D,z=1!=m.J||m.ma,v=0.1*m.ma*m.ma,D=1+3E-4*m.e,H=0.1*m.J*m.J*m.J,I=1+1E-4*m.ka,w=1!=m.J,y=m.x*m.x,P=m.ca,M=m.Y||m.Z,R=0.2*m.Z*m.Z*m.Z,A=m.Y*m.Y*(0>m.Y?-1020:1020),N=m.ja?(2E4*(1-m.ja)*(1-m.ja)|0)+32:0,T=m.d,O=m.xa/2,U=0.01*m.ra*m.ra,G=m.na,K=a,$=1/a,aa=1/b,ca=1/c,m=5/(1+20*
m.wa*m.wa)*(0.01+H);0.8<m&&(m=0.8);for(var m=1-m,S=!1,X=0,F=0,E=0,Q=0,ja=0,L,ka=0,J,ea=0,ha,Z=0,s,da=0,fa,ba=0,V=Array(1024),ma=Array(32),W=V.length;W--;)V[W]=0;for(W=ma.length;W--;)ma[W]=2*Math.random()-1;for(W=0;W<t;W++){if(S)return W;N&&++da>=N&&(da=0,this.reset());p&&++r>=p&&(p=0,d*=n);f+=h;d*=f;d>e&&(d=e,0<P&&(S=!0));J=d;0<O&&(ba+=U,J*=1+Math.sin(ba)*O);J|=0;8>J&&(J=8);G||(q+=u,0>q?q=0:0.5<q&&(q=0.5));if(++F>K)switch(F=0,++X){case 1:K=b;break;case 2:K=c}switch(X){case 0:E=F*$;break;case 1:E=
1+2*(1-F*aa)*T;break;case 2:E=1-F*ca;break;case 3:E=0,S=!0}M&&(A+=R,ha=A|0,0>ha?ha=-ha:1023<ha&&(ha=1023));z&&D&&(v*=D,1E-5>v?v=1E-5:0.1<v&&(v=0.1));fa=0;for(var ia=8;ia--;){ea++;if(ea>=J&&(ea%=J,3==G))for(L=ma.length;L--;)ma[L]=2*Math.random()-1;switch(G){case 0:s=ea/J<q?0.5:-0.5;break;case 1:s=1-2*(ea/J);break;case 2:s=ea/J;s=6.28318531*(0.5<s?s-1:s);s=0>s?1.27323954*s+0.405284735*s*s:1.27323954*s-0.405284735*s*s;s+=0.225*(s*C(s)-s);break;case 3:s=ma[Math.abs(32*ea/J|0)]}z&&(L=ka,H*=I,0>H?H=0:0.1<
H&&(H=0.1),w?(ja+=(s-ka)*H,ja*=m):(ka=s,ja=0),ka+=ja,Q+=ka-L,s=Q*=1-v);M&&(V[Z%1024]=s,s+=V[(Z-ha+1024)%1024],Z++);fa+=s}fa=0.125*fa*E*y;x[W]=1<=fa?32767:-1>=fa?-32768:32767*fa|0}return t}},qb=[0,,0.14,0.445,0.4616,0.6,,,,,,0.587,0.5406,,,,,,1,,,,,0.45],T=[];Ua(5,function(a){T.push(ba(jb(qb,{5:0.6+0.05*a})))});Ua(4,function(a){T.push(ba(jb(qb,{5:0.8-0.05*a})))});var D=0,X=0,Ra=[],E=80,Sa=[];Ua(128,function(a){var b=C(Math.sin(R*a/128));0.1<b&&Sa.push(A(E,E,function(c){c.strokeStyle="#aa6";c.shadowBlur=
30;c.lineWidth=2;c.shadowColor="#ff2";c.beginPath();c.setTransform(b,0,0,1,E/2,E/2);c.fillStyle="#fe4";c.arc(0,0,10,0,R);c.fill();c.fillStyle="#aa6";63<a?c.fillText("1",-3,3.5):c.fillText("\u265b",-5,3.5);c.stroke()}))});var h=20,Ub=A(h,h,function(a){Qa(a,h,h,80,20,180,40,80,40)}),Vb=A(h,h,function(a){Qa(a,h,h,120,20,110,20,40,30)}),Wb=A(h,h,function(a){Qa(a,h,h,140,25,120,25,50,40)}),Nb=Pa(Ub),Hb=Pa(Vb),Kb=Pa(Wb),oa=0,pa=0,ra,sa,Oa,Ha,xa,U,Na=0,Lb="#e86",Mb="#eda",Fb="#d74",Gb="#dc8",Ib="#b52",Jb=
"#ba6",gb=1,Ma=0,Ka=e.createRadialGradient(15,-9,3,15,-9,32);Ka.addColorStop(0,"#67B6FE");Ka.addColorStop(1,"#535CB3");var ta=0,cb,Ja=!1,Ia=e.createRadialGradient(15,-9,3,15,-9,32);Ia.addColorStop(0,"#FFD6CE");Ia.addColorStop(1,"#B34C80");var v=22,O=2*v,y=O/4,S={};V.addEventListener("keydown",ab);V.addEventListener("keyup",ab);V.body.addEventListener("touchmove",function(a){a.preventDefault()},!1);r.fillStyle=$(140,150,240,0.5);r.shadowColor=$(170,180,250,0.5);r.shadowBlur=30;r.lineWidth=7;r.strokeStyle=
$(80,90,140,0.5);var ca=P[2];ca.addEventListener("touchstart",function(a){var b=null,c=null;u(a.changedTouches,function(a){var e=a.clientX-ca.offsetLeft,f=a.clientY-ca.offsetTop;e<n/2-20?b=[a.identifier,e,f]:e>n/2+20&&(c=[a.identifier,e,f])});null!=b&&$a(b);null!=c&&Za(c);a.preventDefault()});ca.addEventListener("touchmove",function(a){var b=null,c=null;u(a.changedTouches,function(a){var e=a.clientX-ca.offsetLeft,f=a.clientY-ca.offsetTop;e<n/2-20?b=[a.identifier,e,f]:e>n/2+20&&(c=[a.identifier,e,
f])});null!=b&&$a(b);null!=c&&Za(c);a.preventDefault()});ca.addEventListener("touchend",function(a){u(a.changedTouches,function(a){null!=t.move&&a.identifier==t.move[0]&&(t.move=null,f.left=0,f.right=0,f.n=0,f.m=0,r.beginPath(),r.clearRect(0,0,n/2,p),r.arc(t.x,t.y,30,0,R),r.fill());null!=t.button&&a.identifier==t.button[0]&&(t.button=null,f.T=0,r.clearRect(n/2,0,n/2,p))})});var Da=e.createRadialGradient(12,-7,3,12,-7,28);Da.addColorStop(0,"#8ED6FF");Da.addColorStop(1,"#004CB3");var w=40,K=w/4,tb=
ba([0,,0.1453,,0.225,0.3726,,0.12,0.22,,,,,0.1547,,,,,1,,,,,0.35]),ub=ba([0,,0.1,,0.22,0.3726,,0.14,0.2,,,,0.12,0.1547,,,,,1,,,,,0.26]),Ya=ba([0,,0.11,0.16,0.09,0.227,0.04,-0.18,0.34,,,,,0.23,0.12,,,,1,0.2,0.16,0.1,,0.32]),sb=$(15,15,15,0.5),Xa,Ea=!1,f={};Wa();(function(a){I=[];ra=[];sa=[];Oa=[];Ha=[];M=OffsetY=0;U=[];xa={};IPX=0;IPY=50;IPZ=0;BW=27;BC=pb;B=4095;Y=0;h=100;for(var b=0;b<a.length;){var c=a[b++];switch(c){case 0:IPX=a[b++];IPZ=a[b++];ia();break;case 1:Ob(a[b++],a[b++]);break;case 2:bb(a[b++],
a[b++]);break;case 3:case 4:DR=3==c?wa:va;aa(a[b++],a[b++],a[b++],a[b++]);break;case 10:var d=aa(a[b++],a[b++],a[b++],a[b++]);d.w.l.$=!0;d.t=eb;break;case 5:Y=a[b++];h=a[b++];break;case 11:var e=a[b++],f=a[b++],n=a[b++],p=a[b++],r=a[b++];case 6:var t=a;a=a[b++];var v=b,z=[],D=I;I=z;var w,m;if(11==c){var A=1E7,C=A;m=w=-1E7;for(b=0;b<a.length;){b++;var d=a[b++],y=a[b++],A=x(A,d),C=x(C,y);w=q(w,d+a[b++]);m=q(m,y+a[b++])}w=w-A+1;m=m-C+1;f-=m;p-=m;m/=2}for(b=0;b<a.length;){var y=a[b++],d=a[b++],H=a[b++],
F=a[b++],G=a[b++];11==c&&(d=d-A+e-w,H=H-C+f-m);switch(y){case 3:case 4:DR=3==y?wa:va;aa(d,H,F,G);break;case 10:d=aa(d,H,F,G);d.w.l.$=!0;d.t=eb;break;default:da("Error loading level at index "+v+"  subindex "+b+" type: "+y)}}a=t;b=v;I=D;var E=Ab(z);11==c&&(u(E.s,function(a){a.w.l&&(a.w.l.K=E)}),ib(E,e-w,f-m,n-w,p-m,r));break;case 7:case 8:DR=7==c?wa:va;e=a[b++];f=a[b++];n=a[b++];p=a[b++];c=a[b++];t=a[b++];r=a[b++];d=e-c/2;H=f-t/2;d=aa(d,H,c,t);ib(d,e,f,n,p,r);break;case 9:bb(a[b++],a[b++],a[b++]);
break;case 12:case 13:DR=12==c?wa:va;Eb(a[b++],a[b++],a[b++],a[b++]);break;case 14:xb(a[b++],a[b++],a[b++],a[b++],a[b++],a[b++],a[b++]);break;case 15:zb(a[b++],a[b++],a[b++]);break;case 16:wb(a[b++],a[b++]);default:da("Error loading level at index "+b+"  type: "+c)}}})(intro);window.onresize=function(){var a=P[0].parentElement,b=n,c=p;n=x(960,a.offsetWidth);p=x(760,a.offsetHeight);var d=a.offsetLeft+(a.offsetWidth-n)/2+"px";u(P,function(a){a.style.top=0;a.style.left=d;if(b!=n||c!=p)a.width=n,a.height=
p});Q.fillStyle=BgCStyle;Q.fillRect(0,0,n,p);if(b!=n||c!=p)u(I,function(a){a.la?a.la(a):z(a)}),Wa()};onresize();navigator.userAgent.match(/Android/i)&&(window.scrollTo(0,1),Q.fillStyle=BgCStyle,Q.fillRect(0,0,n,p));za=oa=f.b-0.5*n;Aa=pa=f.a-0.8*p;var e=nb,Va=null,N,ya,mb=[];Ba(kb)})();

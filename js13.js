(function(){try{var v=document,$=v.getElementById("c"),M=$.width,x=$.height,Fa=$.getContext("2d"),c=Fa,ra=v.getElementById("b"),Ga=ra.getContext("2d"),N=Math.random,ea=Math.abs,Va=Math.min,sa=Math.max,Ha=Math.round,fa=2*Math.PI;onresize=function(){var a=(v.height-x)/2+"px",pa=(v.width-M)/2+"px";$.style.top=a;$.style.left=pa;ra.style.top=a;ra.style.left=pa};onresize();var d=function(a,pa){var e;e=e||1;for(var b=0;b<a;b+=e)pa(b)},Wa=function(a,b){var e;e=e||1;for(var c=0;c<a;c+=e){var d=b(c);if(d)return d}},
ta=function(a,b){for(var e=0;e<a.length;e++)b(a[e],e)},Xa=function(a,b){return Wa(a.length,function(e){return b(a[e],e)})},ga=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame;if(!ga)var Ia=0,ga=function(a){var b=(new Date).getTime(),e=Math.max(0,16-(b-Ia));window.setTimeout(function(){a()},e);Ia=b+e};var ha,O,ua=OffsetY=0,r=function(a,b,e,d,f,g){c.setTransform(a,b,e,d,f-ua,g-OffsetY)},va=function(a,b){var e={};for(k in a)e[k]=a[k];for(k in b)e[k]=b[k];
return e},Ja=function(a,b){for(var e=[],c=0;c<a.length;c++)e[c]=a[c];for(k in b)e[k]=b[k];return e};BW=27;BH=0;B=4095;BC="rgba(15,15,15,0.3)";DEBUG=!0;var Ya=function(){this.N=function(a){for(var b=0;24>b;b++)this[String.fromCharCode(97+b)]=a[b]||0;0.01>this.i&&(this.i=0.01);a=this.n+this.i+this.p;0.18>a&&(a=0.18/a,this.n*=a,this.i*=a,this.p*=a)}},wa=new function(){this.m=new Ya;var a,b,e,c,d,g,f,l,q,qa,u,n;this.reset=function(){var a=this.m;c=100/(a.L*a.L+0.001);d=100/(a.A*a.A+0.001);g=1-0.01*a.e*
a.e*a.e;f=1E-6*-a.B*a.B*a.B;a.H||(u=0.5-a.T/2,n=5E-5*-a.U);l=0<a.q?1-0.9*a.q*a.q:1+10*a.q*a.q;q=0;qa=1==a.C?0:2E4*(1-a.C)*(1-a.C)+32};this.P=function(){this.reset();var c=this.m;a=1E5*c.n*c.n;b=1E5*c.i*c.i;e=1E5*c.p*c.p+10;return a+b+e|0};this.O=function(x,p){var h=this.m,v=1!=h.r||h.G,r=0.1*h.G*h.G,z=1+3E-4*h.g,P=0.1*h.r*h.r*h.r,E=1+1E-4*h.F,I=1!=h.r,K=h.x*h.x,M=h.A,C=h.u||h.v,U=0.2*h.v*h.v*h.v,A=h.u*h.u*(0>h.u?-1020:1020),J=h.D?(2E4*(1-h.D)*(1-h.D)|0)+32:0,$=h.f,S=h.S/2,da=0.01*h.M*h.M,G=h.H,N=
a,fa=1/a,ga=1/b,ha=1/e,h=5/(1+20*h.Q*h.Q)*(0.01+P);0.8<h&&(h=0.8);for(var h=1-h,O=!1,ba=0,la=0,ma=0,D=0,ia=0,na,ja=0,w,Q=0,aa,T=0,m,ca=0,R,V=0,F=Array(1024),oa=Array(32),y=F.length;y--;)F[y]=0;for(y=oa.length;y--;)oa[y]=2*Math.random()-1;for(y=0;y<p;y++){if(O)return y;J&&++ca>=J&&(ca=0,this.reset());qa&&++q>=qa&&(qa=0,c*=l);g+=f;c*=g;c>d&&(c=d,0<M&&(O=!0));w=c;0<S&&(V+=da,w*=1+Math.sin(V)*S);w|=0;8>w&&(w=8);G||(u+=n,0>u?u=0:0.5<u&&(u=0.5));if(++la>N)switch(la=0,++ba){case 1:N=b;break;case 2:N=e}switch(ba){case 0:ma=
la*fa;break;case 1:ma=1+2*(1-la*ga)*$;break;case 2:ma=1-la*ha;break;case 3:ma=0,O=!0}C&&(A+=U,aa=A|0,0>aa?aa=-aa:1023<aa&&(aa=1023));v&&z&&(r*=z,1E-5>r?r=1E-5:0.1<r&&(r=0.1));R=0;for(var ka=8;ka--;){Q++;if(Q>=w&&(Q%=w,3==G))for(na=oa.length;na--;)oa[na]=2*Math.random()-1;switch(G){case 0:m=Q/w<u?0.5:-0.5;break;case 1:m=1-2*(Q/w);break;case 2:m=Q/w;m=6.28318531*(0.5<m?m-1:m);m=0>m?1.27323954*m+0.405284735*m*m:1.27323954*m-0.405284735*m*m;m+=0.225*(m*ea(m)-m);break;case 3:m=oa[Math.abs(32*Q/w|0)]}v&&
(na=ja,P*=E,0>P?P=0:0.1<P&&(P=0.1),I?(ia+=(m-ja)*P,ia*=h):(ja=m,ia=0),ja+=ia,D+=ja-na,m=D*=1-r);C&&(F[T%1024]=m,m+=F[(T-aa+1024)%1024],T++);R+=m}R=0.125*R*ma*K;x[y]=1<=R?32767:-1>=R?-32768:32767*R|0}return p}},S=function(a){wa.m.N(a);var b=wa.P();a=new Uint8Array(4*((b+1)/2|0)+44);var b=2*wa.O(new Uint16Array(a.buffer,44),b),e=new Uint32Array(a.buffer,0,44);e[0]=1179011410;e[1]=b+36;e[2]=1163280727;e[3]=544501094;e[4]=16;e[5]=65537;e[6]=44100;e[7]=88200;e[8]=1048578;e[9]=1635017060;e[10]=b;for(var b=
b+44,e=0,c="data:audio/wav;base64,";e<b;e+=3)var d=a[e]<<16|a[e+1]<<8|a[e+2],c=c+("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[d>>18]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[d>>12&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[d>>6&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[d&63]);e-=b;a=new Audio;a.src=c.slice(0,c.length-e)+"==".slice(0,e);return a},xa=[];for(i=0;128>i;i++)s=ea(Math.sin(fa*i/128)),
0.1<s&&xa.push(s);var Ka=[0,,0.14,0.445,0.4616,0.6,,,,,,0.587,0.5406,,,,,,1,,,,,0.45],C=[];d(5,function(a){C.push(S(Ja(Ka,{5:0.6+0.05*a})))});d(4,function(a){C.push(S(Ja(Ka,{5:0.8-0.05*a})))});var p=0,ba=0,Za=function(){var a,d;c.save();c.strokeStyle="#aa6";c.shadowBlur=30;c.lineWidth=2;c.shadowColor="#ff2";c.shadowOffsetX=0;for(d=c.shadowOffsetY=0;d<D.length;d++)if(a=D[d],a.x>=b.b&&a.x<b.b+q&&a.y>=b.c&&a.y<b.c+q)180<t-ba&&(p=0),D.splice(d,1),d--,C[p++].play(),p%=C.length,ba=t;else{c.beginPath();
L=xa.length;var e=(a.F+t)%L;r(xa[e],0,0,1,a.x,a.y);c.fillStyle="#fe4";c.arc(0,0,10,0,fa);c.fill();c.fillStyle="#aa6";e>L/2?c.fillText("1",-3,3.5):c.fillText("\u265b",-5,3.5);c.stroke()}c.restore()},D=[],d=function(a,b){X=a;Z=b;Y=IPY;H=10;T();D.push({x:SX,y:SY,F:0+100*N()<<0})},ca=function(a,b,e){var d=v.createElement("canvas");d.width=a;d.height=b;e(d.getContext("2d"),d);d.h=function(a,b,e,d){c.drawImage(this,a,b,e,d)};return d},ya=function(a,b,c,d,f,g,l,r,q){b=a.createImageData(b,c);c=b.data;for(var n=
0;n<c.length;n+=4){var u=c,p=n,v=d+N()*f,x=g+N()*l,h=r+N()*q;u[p]=v;u[p+1]=x;u[p+2]=h;u[p+3]=255}a.putImageData(b,0,0)},f=20,l=ca(f,f,function(a){ya(a,f,f,80,20,180,40,80,40)}),z=ca(f,f,function(a){ya(a,f,f,120,20,110,20,40,30)}),da=ca(f,f,function(a){ya(a,f,f,140,25,120,25,50,40)}),U=function(a){var b=c.createPattern(ca(3*f,3*f,function(b){b.drawImage(a,0,0,3*f,3*f)}),"repeat");b.h=function(a,b,d,g){c.fillStyle=this;c.fillRect(a,b,d,g)};return b},$a=U(l),ab=U(z),E=U(da),V=0,F=0,T=function(){SX=X+
Y/2;SY=x-Y/2-H-Z},G=function(a){a.b=a.x+a.y/2;a.c=x-a.y/2-a.e-a.z},A=[],La=[],Ma=[],Na=[],Oa=[],l=function(){T();var a={x:X,y:Y,z:Z,R:B,I:BC,K:BW,J:BH||0.3*BW,b:SX,c:SY,g:W,e:H,f:f};0<W&&0<H&&A.push(va(a,{s:bb,t:cb,w:ab,j:W,k:H,o:B,l:Pa,h:DR[0]||DR}));0<f&&0<H&&A.push(va(a,{s:db,t:eb,w:E,j:f,k:H,o:B>>4,l:fb,h:DR[1]||DR}));0<W&&0<f&&A.push(va(a,{s:gb,t:hb,w:$a,j:W,k:f,o:B>>8,l:ib,h:DR[2]||DR}));Y+f<IPY||Y>IPY||(16<f&&16<H&&(La.push({y:Y,z:Z,f:f,e:H,g:0,x:X}),Ma.push({y:Y,z:Z,f:f,e:H,g:0,x:X+W})),16<
f&&16<W&&(Na.push({x:X,y:Y,g:W,f:f,e:0,z:Z+H}),Oa.push({x:X,y:Y,g:W,f:f,e:0,z:Z})))},Qa=function(a,b,c,d,f){return Xa(f,function(g){if(a+d>g.x&&a<g.x+g.g&&b+d>g.y&&b<g.y+g.f&&c+d>g.z&&c<g.z+g.e)return g})},za=function(a,b,c,d){var f={z:-1E10};ta(Na,function(g){g.z>f.z&&c+d>g.z&&a+d>g.x&&a<g.x+g.g&&b+d>g.y&&b<g.y+g.f&&(f=g)});return f},gb="#e86",hb="#eda",bb="#d74",cb="#dc8",db="#b52",eb="#ba6",Ra=function(a){var b=a.o,d=a.j,f=a.k;b&15&&(c.strokeStyle=a.I,c.beginPath(),b&1&&(c.moveTo(0,0),c.lineTo(d,
0)),b&2&&(c.moveTo(d,0),c.lineTo(d,f)),b&4&&(c.moveTo(d,f),c.lineTo(0,f)),b&8&&(c.moveTo(0,f),c.lineTo(0,0)),c.stroke())},Aa=function(a){c.globalAlpha=a.b-10<b.b+q&&a.b+10+a.g+a.f/2>b.b&&a.y+a.f<IPY&&a.c-10<b.c+q&&a.c+10+a.e+a.f/2>b.c?0.3:1},ib=function(a,c){if(c){if(a.z-a.e>=b.z)return}else if(a.z-a.e<b.z)return;Aa(a);r(1,0,-0.5,0.5,a.b+0.4+0.5*a.f,a.c-0.5*a.f);return 1},Pa=function(a,c){if(c){if(a.y<=b.y)return}else{if(a.y>b.y)return;Aa(a)}r(1,0,0,1,a.b,a.c);return 1},fb=function(a,b){if(b){if(a.x+
a.g>=Ba)return}else if(a.x+a.g<Ba)return;Aa(a);r(0.5,-0.5,0,1,a.b+a.g,a.c);return 1},z=function(a){var b=a.j,d=a.k,f=a.t,l=a.K,g=a.J;c.fillStyle=a.s;c.fillRect(0,0,b,d);c.strokeStyle=f;f=0;c.lineWidth=g/5;y0=0;y1=g;for(c.beginPath();y1<=d;){f++;c.moveTo(0,y1);c.lineTo(b,y1);for(x0=f&1?l:l/2;x0<b;)c.moveTo(x0,y0),c.lineTo(x0,y1),x0+=l;y0=y1;y1+=g}c.stroke();Ra(a)},da=function(a){a.w.h(0,0,a.j,a.k);Ra(a)},U=function(a,b){var c={x:a,y:IPY,z:b,e:I,a:-1,d:0,j:I,k:I,o:0,l:Pa,h:jb,update:kb};G(c);c.floor=
za(c.x+J,c.y+J,c.z+J,ka);DEBUG&&!c.floor&&alert("Enemy must be above floor");A.push(c)},Ca=c.createRadialGradient(15,-9,3,15,-9,32);Ca.addColorStop(0,"#FFD6CE");Ca.addColorStop(1,"#B34C80");var ka=22,I=2*ka,J=I/4,kb=function(a){a.x+=a.a;a.d-=0.2;a.z+=a.d;G(a);if(a.b+I>=b.b&&a.b<b.b+q&&a.c+I>=b.c&&a.c<b.c+q)180<t-ba&&(p=0),C[p++].play(),p%=C.length,ba=t,Da();else{var c=za(a.x+J,a.y+J,a.z+J,ka);c!=a.floor?(a.x-=a.a,a.a*=-1):a.z<=c.z&&(a.z=c.z,a.d=2);G(a)}},jb=function(a){H=I;Sa(a.floor,0>a.a,a.x,a.y,
a.z,ka,Ca,"\u25d5` \u141f\u25d5 \u30ce","\u2054",-8,9)};PY=IPY=50;Y=0;BW=27;BC="rgba(15,15,15,0.3)";DR=z;f=100;Y=90;f=10;DR=z;B=4095;X=299;Z=-400;W=20;H=125;l();X=661;Z=-479;H=121;l();X=332;Z=-478;H=58;l();X=1480;Z=-389;H=84;l();Y=0;f=100;DR=da;X=80;Z=-514;W=614;H=34;l();B=4091;X=449;Z=-482;W=141;H=71;l();DR=z;B=4095;X=187;Z=-248;W=174;H=16;l();IPX=PX=137;IPZ=PZ=-424;d(208,-193);d(260,-210);d(315,-190);Y=0;X=217;Z=-412;W=141;H=12;l();d(589,-382);U(547,-381);Y=0;X=391;Z=-342;H=28;l();DR=da;X=770;Z=
-543;W=462;H=34;l();DR=z;X=802;Z=-416;W=111;H=28;l();X=914;Z=-509;W=171;H=219;l();X=627;Z=-326;W=150;H=12;l();d(798,-463);d(850,-480);d(836,-446);d(882,-486);d(819,-480);d(872,-460);d(1132,-320);d(1184,-322);d(1236,-323);d(1184,-350);d(1160,-322);d(1211,-323);d(1185,-374);d(1186,-398);d(1188,-422);d(1177,-446);d(1152,-451);d(1134,-431);DR=da;Y=0;X=1279;Z=-543;W=259;H=42;l();d(1313,-335);d(1364,-311);d(994,-205);d(1316,-362);d(1336,-315);d(1386,-328);d(1338,-386);d(1360,-403);d(1379,-431);d(1361,-452);
d(1330,-456);d(1304,-437);U(1022,-247);Y=0;X=1430;Z=-501;W=141;H=110;l();DR=z;X=1404;Z=-293;W=111;H=28;l();X=1185;Z=-240;W=168;l();X=1544;Z=-391;W=53;H=65;l();d(1231,-122);d(1232,-147);d(1233,-171);d(1233,-194);d(1278,-97);d(1335,-103);d(1307,-98);d(1297,-144);d(1318,-130);d(1324,-195);d(1339,-171);d(1324,-156);d(1298,-200);d(1273,-187);d(1231,-97);Y=0;f=10;B=234;X=246;Z=-482;W=50;H=70;l();B=4095;X=476;Z=-411;W=27;l();X=1441;Z=-391;W=20;H=97;l();var K={32:0};v.addEventListener("keydown",function(a){K[a.keyCode]=
1});v.addEventListener("keyup",function(a){K[a.keyCode]=0});var Ea=c.createRadialGradient(12,-7,3,12,-7,28);Ea.addColorStop(0,"#8ED6FF");Ea.addColorStop(1,"#004CB3");var E=20,q=2*E,n=q/4,b={},Da=function(){b={x:IPX,y:IPY,z:IPZ,a:0,V:0,d:0,e:q};G(b);V=b.b-0.5*M;F=b.c-0.7*x};Da();var lb=S([0,,0.1453,,0.225,0.3726,,0.12,0.22,,,,,0.1547,,,,,1,,,,,0.35]),mb=S([0,,0.1,,0.22,0.3726,,0.14,0.2,,,,0.12,0.1547,,,,,1,,,,,0.26]),Ta=S([0,,0.11,0.16,0.09,0.227,0.04,-0.18,0.34,,,,,0.23,0.12,,,,1,0.2,0.16,0.1,,0.32]),
nb=function(){left=K[37];right=K[39];b.a=left?b.a-0.15:right?b.a+0.15:0.9*b.a;var a=2.5+K[32];ea(b.a)>a&&(left?b.a=Va(0.95*b.a,-a):right&&(b.a=sa(0.95*b.a,a)));b.x+=b.a;b.d-=0.2;b.z+=b.d;H=q;0<b.d&&(a=Qa(b.x+n,b.y+n,b.z+n,E,Oa))&&(Ta.play(),b.z-=b.d,b.d*=-0.8);-2E3>b.z&&Da();b.floor=za(b.x+n,b.y+n,b.z+n,E);b.z<=b.floor.z&&(-2>b.d||K[32]?lb.play():-1>b.d&&mb.play(),b.z=b.floor.z,b.d=K[32]?sa(ea(b.d/2),6):sa(ea(b.d/2),ea(b.a)/1.5));if(a=Qa(b.x+n,b.y+n,b.z+n,E,0<b.a?La:Ma))b.x-=b.a,Ta.play(),b.a=10<
b.z-b.floor.z?-0.2*b.a:-0.8*b.a;G(b);if(left||right)V=b.b-M*(0.5-b.a/20);F=b.c-0.7*x},Sa=function(a,b,d,f,l,g,n,p,q,v,u){X=d;Y=f;a&&-1E7<a.z&&(Z=a.z,T(),c.save(),r(1,0,0,0.3,SX+g-4,SY+2*g-1),c.beginPath(),c.arc(0,0,g,0,fa),c.fillStyle="rgba(15,15,15,0.5)",c.fill());Z=l;T();r(1,0,0,1,SX+g,SY+g);c.lineWidth=1;c.strokeStyle="#111";c.fillStyle=n;c.beginPath();c.arc(0,0,g,0,fa);c.fill();c.scale(b?1:-1,1);c.fillStyle="#222";c.fillText(p,-15,1);c.fillText(q,v,u);c.stroke();c.restore()};Ga.fillStyle="#222";
Ga.fillRect(0,0,M,x);ha=V=b.b-0.5*M;O=F=b.c-0.8*x;var c=Fa,Ba=t=0,Ua=function(){t++;ha=0.9*ha+0.1*V;ua=Ha(ha);O=0.9*O+0.1*F;OffsetY=Ha(O);r(1,0,0,1,0,0);c.clearRect(ua,OffsetY,M,x);Ba=b.b+q;nb();ta(A,function(a){a.update&&a.update(a);a.l(a,!0)&&a.h(a)});c.globalAlpha=1;H=q;Sa(b.floor,0>b.a,b.x,b.y,b.z,E,Ea,"\uff61\u25d5  \u25d5\uff61","\u203f",-5,5);ta(A,function(a){a.l(a,!1)&&a.h(a)});c.globalAlpha=1;Za();ga(Ua)};ga(Ua)}catch(ob){alert(ob)}})();

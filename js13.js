(function(){function Ia(a,b,e,m,c,A,f,h,n,ga,r){X=e;Y=m;a&&-1E7<a.z&&(Z=a.z,U(),d.save(),C(1,0,0,0.3,SX+A-4,SY+2*A-1),d.beginPath(),d.arc(0,0,A,0,ha),d.fillStyle="rgba(15,15,15,0.5)",d.fill());Z=c;U();C(1,0,0,1,SX+A,SY+A);d.lineWidth=1;d.strokeStyle="#111";d.fillStyle=f;d.beginPath();d.arc(0,0,A,0,ha);d.fill();d.scale(b?1:-1,1);d.fillStyle="#222";d.fillText(h,-15,1);d.fillText(n,ga,r);d.stroke();d.restore()}function Xa(){var a=b.left,w=b.right,e=b.C;b.a=a?b.a-0.15:w?b.a+0.15:0.9*b.a;var m=2.5+e;V(b.a)>
m&&(a?b.a=Ya(0.95*b.a,-m):w&&(b.a=$(0.95*b.a,m)));b.x+=b.a;b.c-=0.2;b.z+=b.c;H=n;0<b.c&&(m=ia(b.x+v,b.y+v,b.z+v,20,Ja))&&(Ka.play(),b.z-=b.c,b.c*=-0.8);-2E3>b.z&&aa();b.floor=pa(b.x+v,b.y+v,b.z+v,20);if(b.z<=b.floor.z||e&&5>b.z-b.floor.z&&2>V(b.c))-2>b.c||e?Za.play():-1>b.c&&$a.play(),b.z=b.floor.z,b.c=e?$(V(b.c/2),6):$(V(b.c/2),V(b.a)/1.5);if(m=ia(b.x+v,b.y+v,b.z+v,20,0<b.a?va:wa))b.x-=b.a,Ka.play(),b.a=10<b.z-b.floor.z?-0.2*b.a:-0.8*b.a;ba(b);if(a||w)ca=b.b-u*(0.5-b.a/20);ja=b.d-0.7*p}function aa(){b=
{x:IPX,y:IPY,z:IPZ,a:0,W:0,c:0,e:n};ba(b);ca=b.b-0.5*u;ja=b.d-0.7*p}function ab(a){H=D;Ia(a.floor,0>a.a,a.x,a.y,a.z,J,xa,"\u25d5` \u141f\u25d5 \u30ce","\u2054",-8,9)}function bb(a){a.x+=a.a;a.c-=0.2;a.z+=a.c;ba(a);if(a.b+D>=b.b&&a.b<b.b+n&&a.d+D>=b.d&&a.d<b.d+n)180<t-K&&(y=0),M[y++].play(),y%=M.length,K=t,aa();else{ia(a.x+E,a.y,a.z+E,J,0<a.a?va:wa)&&(a.x-=a.a,a.a*=-1);var w=pa(a.x+E,a.y+E,a.z+E,J);w!=a.floor?(a.x-=a.a,a.a*=-1):a.z<=w.z&&(a.z=w.z,a.c=2);ba(a)}}function La(a,b){var e={x:a,y:IPY,z:b,
e:D,a:-1,c:0,j:D,k:D,o:0,l:Ma,h:ab,update:bb};ba(e);e.floor=pa(e.x+E,e.y+E,e.z+E,J);DEBUG&&!e.floor&&alert("Enemy must be above floor");N.push(e)}function ya(a){a.w.h(0,0,a.j,a.k);Na(a)}function da(a){var b=a.j,e=a.k,m=a.t,c=a.L,A=a.K;d.fillStyle=a.s;d.fillRect(0,0,b,e);d.strokeStyle=m;m=0;d.lineWidth=A/5;y0=0;y1=A;for(d.beginPath();y1<=e;){m++;d.moveTo(0,y1);d.lineTo(b,y1);for(x0=m&1?c:c/2;x0<b;)d.moveTo(x0,y0),d.lineTo(x0,y1),x0+=c;y0=y1;y1+=A}d.stroke();Na(a)}function cb(a,b){if(b){if(a.x+a.g>=
za)return}else if(a.x+a.g<za)return;Aa(a);C(0.5,-0.5,0,1,a.b+a.g,a.d);return 1}function Ma(a,w){if(w){if(a.y<=b.y)return}else{if(a.y>b.y)return;Aa(a)}C(1,0,0,1,a.b,a.d);return 1}function db(a,w){if(w){if(a.z-a.e>=b.z)return}else if(a.z-a.e<b.z)return;Aa(a);C(1,0,-0.5,0.5,a.b+0.4+0.5*a.f,a.d-0.5*a.f);return 1}function Aa(a){d.globalAlpha=a.b-10<b.b+n&&a.b+10+a.g+a.f/2>b.b&&a.y+a.f<IPY&&a.d-10<b.d+n&&a.d+10+a.e+a.f/2>b.d?0.3:1}function Na(a){var b=a.o,e=a.j,m=a.k;b&15&&(d.strokeStyle=a.J,d.beginPath(),
b&1&&(d.moveTo(0,0),d.lineTo(e,0)),b&2&&(d.moveTo(e,0),d.lineTo(e,m)),b&4&&(d.moveTo(e,m),d.lineTo(0,m)),b&8&&(d.moveTo(0,m),d.lineTo(0,0)),d.stroke())}function pa(a,b,e,m){var d={z:-1E10};O(Oa,function(c){c.z>d.z&&e+m>c.z&&a+m>c.x&&a<c.x+c.g&&b+m>c.y&&b<c.y+c.f&&(d=c)});return d}function ia(a,b,e,d,c){return eb(c,function(c){if(a+d>c.x&&a<c.x+c.g&&b+d>c.y&&b<c.y+c.f&&e+d>c.z&&e<c.z+c.e)return c})}function h(){U();var a={x:X,y:Y,z:Z,S:B,J:BC,L:BW,K:BH||0.3*BW,b:SX,d:SY,g:W,e:H,f:f};0<W&&0<H&&N.push(Ba(a,
{s:fb,t:gb,w:hb,j:W,k:H,o:B,l:Ma,h:DR[0]||DR}));0<f&&0<H&&N.push(Ba(a,{s:ib,t:jb,w:kb,j:f,k:H,o:B>>4,l:cb,h:DR[1]||DR}));0<W&&0<f&&N.push(Ba(a,{s:lb,t:mb,w:nb,j:W,k:f,o:B>>8,l:db,h:DR[2]||DR}));Y+f<IPY||Y>IPY||(16<f&&16<H&&(va.push({y:Y,z:Z,f:f,e:H,g:0,x:X}),wa.push({y:Y,z:Z,f:f,e:H,g:0,x:X+W})),16<f&&16<W&&(Oa.push({x:X,y:Y,g:W,f:f,e:0,z:Z+H}),Ja.push({x:X,y:Y,g:W,f:f,e:0,z:Z})))}function ba(a){a.b=a.x+a.y/2;a.d=p-a.y/2-a.e-a.z}function U(){SX=X+Y/2;SY=p-Y/2-H-Z}function Ca(a){var b=d.createPattern(P(3*
f,3*f,function(b){b.drawImage(a,0,0,3*f,3*f)}),"repeat");b.h=function(a,b,c,w){d.fillStyle=this;d.fillRect(a,b,c,w)};return b}function Da(a,b,e,c,d,f,h,n,v){b=a.createImageData(b,e);e=b.data;for(var ga=0;ga<e.length;ga+=4){var r=e,p=ga,ob=c+ka()*d,q=f+ka()*h,g=n+ka()*v;r[p]=ob;r[p+1]=q;r[p+2]=g;r[p+3]=255}a.putImageData(b,0,0)}function P(a,b,e){var c=la.createElement("canvas");c.width=a;c.height=b;e(c.getContext("2d"),c);c.h=function(a,b,e,c){d.drawImage(this,a,b,e,c)};return c}function c(a,b){X=
a;Z=b;Y=IPY;H=10;U();ma.push({x:SX,y:SY,G:0+100*ka()<<0})}function pb(){var a,c;d.save();d.strokeStyle="#aa6";d.shadowBlur=30;d.lineWidth=2;d.shadowColor="#ff2";d.shadowOffsetX=0;for(c=d.shadowOffsetY=0;c<ma.length;c++)if(a=ma[c],a.x>=b.b&&a.x<b.b+n&&a.y>=b.d&&a.y<b.d+n)180<t-K&&(y=0),ma.splice(c,1),c--,M[y++].play(),y%=M.length,K=t;else{d.beginPath();L=Ea.length;var e=(a.G+t)%L;C(Ea[e],0,0,1,a.x,a.y);d.fillStyle="#fe4";d.arc(0,0,10,0,ha);d.fill();d.fillStyle="#aa6";e>L/2?d.fillText("1",-3,3.5):d.fillText("\u265b",
-5,3.5);d.stroke()}d.restore()}function G(a){Fa.m.O(a);var b=Fa.Q();a=new Uint8Array(4*((b+1)/2|0)+44);var b=2*Fa.P(new Uint16Array(a.buffer,44),b),e=new Uint32Array(a.buffer,0,44);e[0]=1179011410;e[1]=b+36;e[2]=1163280727;e[3]=544501094;e[4]=16;e[5]=65537;e[6]=44100;e[7]=88200;e[8]=1048578;e[9]=1635017060;e[10]=b;for(var b=b+44,e=0,c="data:audio/wav;base64,";e<b;e+=3)var d=a[e]<<16|a[e+1]<<8|a[e+2],c=c+("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[d>>18]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[d>>
12&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[d>>6&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[d&63]);e-=b;a=new Audio;a.src=c.slice(0,c.length-e)+"==".slice(0,e);return a}function Pa(a,b){for(var e=[],c=0;c<a.length;c++)e[c]=a[c];for(k in b)e[k]=b[k];return e}function Ba(a,b){var c={};for(k in a)c[k]=a[k];for(k in b)c[k]=b[k];return c}function C(a,b,c,m,f,h){d.setTransform(a,b,c,m,f-Ga,h-OffsetY)}function eb(a,b){return qb(a.length,function(c){return b(a[c],
c)})}function qb(a,b){var c;c=c||1;for(var d=0;d<a;d+=c){var f=b(d);if(f)return f}}function Qa(a,b){var c;c=c||1;for(var d=0;d<a;d+=c)b(d)}function O(a,b){for(var c=0;c<a.length;c++)b(a[c],c)}function rb(){this.O=function(a){for(var b=0;24>b;b++)this[String.fromCharCode(97+b)]=a[b]||0;0.01>this.i&&(this.i=0.01);a=this.n+this.i+this.p;0.18>a&&(a=0.18/a,this.n*=a,this.i*=a,this.p*=a)}}function Ra(){t++;Q=0.9*Q+0.1*ca;Ga=Sa(Q);ea=0.9*ea+0.1*ja;OffsetY=Sa(ea);C(1,0,0,1,0,0);d.clearRect(Ga,OffsetY,u,p);
za=b.b+n;Xa();O(N,function(a){a.update&&a.update(a);a.l(a,!0)&&a.h(a)});d.globalAlpha=1;H=n;Ia(b.floor,0>b.a,b.x,b.y,b.z,20,Ha,"\uff61\u25d5  \u25d5\uff61","\u203f",-5,5);O(N,function(a){a.l(a,!1)&&a.h(a)});d.globalAlpha=1;pb();I(Ra)}DEBUG=!0;onerror=function(a,b,c){alert(a,b,c)};var la=document,q=[];O(["b","c","d"],function(a){q.push(la.getElementById(a))});var u=q[0].width,p=q[0].height,Ta=q[1].getContext("2d"),d=Ta,Ua=q[0].getContext("2d"),ka=Math.random,V=Math.abs,Ya=Math.min,$=Math.max,Sa=Math.round,
ha=2*Math.PI;onresize=function(){var a=q[0].parentElement,b=a.offsetTop+(a.offsetHeight-p)/2+"px",c=a.offsetLeft+(a.offsetWidth-u)/2+"px";O(q,function(a){a.style.top=b;a.style.left=c});u=q[0].width;p=q[0].height;Ua.fillStyle="#222";Ua.fillRect(0,0,u,p)};onresize();var O=function(a,b){for(var c=0;c<a.length;c++)b(a[c],c)},I=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame;if(!I)var Va=0,I=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-Va));
window.setTimeout(function(){a()},c);Va=b+c};var Q,ea,Ga=OffsetY=0;BW=27;BH=0;B=4095;BC="rgba(15,15,15,0.3)";var Fa=new function(){this.m=new rb;var a,b,c,d,f,h,n,p,v,q,r,y;this.reset=function(){var a=this.m;d=100/(a.M*a.M+0.001);f=100/(a.A*a.A+0.001);h=1-0.01*a.e*a.e*a.e;n=1E-6*-a.B*a.B*a.B;a.I||(r=0.5-a.U/2,y=5E-5*-a.V);p=0<a.q?1-0.9*a.q*a.q:1+10*a.q*a.q;v=0;q=1==a.D?0:2E4*(1-a.D)*(1-a.D)+32};this.Q=function(){this.reset();var d=this.m;a=1E5*d.n*d.n;b=1E5*d.i*d.i;c=1E5*d.p*d.p+10;return a+b+c|0};
this.P=function(E,z){var g=this.m,C=1!=g.r||g.H,u=0.1*g.H*g.H,D=1+3E-4*g.g,R=0.1*g.r*g.r*g.r,M=1+1E-4*g.G,N=1!=g.r,O=g.x*g.x,ba=g.A,J=g.u||g.v,da=0.2*g.v*g.v*g.v,G=g.u*g.u*(0>g.u?-1020:1020),U=g.F?(2E4*(1-g.F)*(1-g.F)|0)+32:0,ha=g.f,ca=g.T/2,ja=0.01*g.N*g.N,K=g.I,P=a,ka=1/a,la=1/b,ma=1/c,g=5/(1+20*g.R*g.R)*(0.01+R);0.8<g&&(g=0.8);for(var g=1-g,Q=!1,ea=0,qa=0,ra=0,I=0,na=0,sa,oa=0,x,S=0,fa,$=0,l,ia=0,T,aa=0,ua=Array(1024),ta=Array(32),F=ua.length;F--;)ua[F]=0;for(F=ta.length;F--;)ta[F]=2*Math.random()-
1;for(F=0;F<z;F++){if(Q)return F;U&&++ia>=U&&(ia=0,this.reset());q&&++v>=q&&(q=0,d*=p);h+=n;d*=h;d>f&&(d=f,0<ba&&(Q=!0));x=d;0<ca&&(aa+=ja,x*=1+Math.sin(aa)*ca);x|=0;8>x&&(x=8);K||(r+=y,0>r?r=0:0.5<r&&(r=0.5));if(++qa>P)switch(qa=0,++ea){case 1:P=b;break;case 2:P=c}switch(ea){case 0:ra=qa*ka;break;case 1:ra=1+2*(1-qa*la)*ha;break;case 2:ra=1-qa*ma;break;case 3:ra=0,Q=!0}J&&(G+=da,fa=G|0,0>fa?fa=-fa:1023<fa&&(fa=1023));C&&D&&(u*=D,1E-5>u?u=1E-5:0.1<u&&(u=0.1));T=0;for(var pa=8;pa--;){S++;if(S>=x&&
(S%=x,3==K))for(sa=ta.length;sa--;)ta[sa]=2*Math.random()-1;switch(K){case 0:l=S/x<r?0.5:-0.5;break;case 1:l=1-2*(S/x);break;case 2:l=S/x;l=6.28318531*(0.5<l?l-1:l);l=0>l?1.27323954*l+0.405284735*l*l:1.27323954*l-0.405284735*l*l;l+=0.225*(l*V(l)-l);break;case 3:l=ta[Math.abs(32*S/x|0)]}C&&(sa=oa,R*=M,0>R?R=0:0.1<R&&(R=0.1),N?(na+=(l-oa)*R,na*=g):(oa=l,na=0),oa+=na,I+=oa-sa,l=I*=1-u);J&&(ua[$%1024]=l,l+=ua[($-fa+1024)%1024],$++);T+=l}T=0.125*T*ra*O;E[F]=1<=T?32767:-1>=T?-32768:32767*T|0}return z}},
Ea=[];for(i=0;128>i;i++)s=V(Math.sin(ha*i/128)),0.1<s&&Ea.push(s);var Wa=[0,,0.14,0.445,0.4616,0.6,,,,,,0.587,0.5406,,,,,,1,,,,,0.45],M=[];Qa(5,function(a){M.push(G(Pa(Wa,{5:0.6+0.05*a})))});Qa(4,function(a){M.push(G(Pa(Wa,{5:0.8-0.05*a})))});var y=0,K=0,ma=[],f=20,sb=P(f,f,function(a){Da(a,f,f,80,20,180,40,80,40)}),tb=P(f,f,function(a){Da(a,f,f,120,20,110,20,40,30)}),ub=P(f,f,function(a){Da(a,f,f,140,25,120,25,50,40)}),nb=Ca(sb),hb=Ca(tb),kb=Ca(ub),ca=0,ja=0,N=[],va=[],wa=[],Oa=[],Ja=[],lb="#e86",
mb="#eda",fb="#d74",gb="#dc8",ib="#b52",jb="#ba6",xa=d.createRadialGradient(15,-9,3,15,-9,32);xa.addColorStop(0,"#FFD6CE");xa.addColorStop(1,"#B34C80");var J=22,D=2*J,E=D/4;PY=IPY=50;Y=0;BW=27;BC="rgba(15,15,15,0.3)";DR=da;f=100;Y=90;f=10;DR=da;B=4095;X=299;Z=-400;W=20;H=125;h();X=661;Z=-479;H=121;h();X=332;Z=-478;H=58;h();X=1480;Z=-389;H=84;h();Y=0;f=100;DR=ya;X=80;Z=-514;W=614;H=34;h();B=4091;X=449;Z=-482;W=141;H=71;h();DR=da;B=4095;X=187;Z=-248;W=174;H=16;h();IPX=PX=137;IPZ=PZ=-424;c(208,-193);
c(260,-210);c(315,-190);Y=0;X=217;Z=-412;W=141;H=12;h();c(589,-382);La(547,-381);Y=0;X=391;Z=-342;H=28;h();DR=ya;X=770;Z=-543;W=462;H=34;h();DR=da;X=802;Z=-416;W=111;H=28;h();X=914;Z=-509;W=171;H=219;h();X=627;Z=-326;W=150;H=12;h();c(798,-463);c(850,-480);c(836,-446);c(882,-486);c(819,-480);c(872,-460);c(1132,-320);c(1184,-322);c(1236,-323);c(1184,-350);c(1160,-322);c(1211,-323);c(1185,-374);c(1186,-398);c(1188,-422);c(1177,-446);c(1152,-451);c(1134,-431);DR=ya;Y=0;X=1279;Z=-543;W=259;H=42;h();c(1313,
-335);c(1364,-311);c(994,-205);c(1316,-362);c(1336,-315);c(1386,-328);c(1338,-386);c(1360,-403);c(1379,-431);c(1361,-452);c(1330,-456);c(1304,-437);La(1022,-247);Y=0;X=1430;Z=-501;W=141;H=110;h();DR=da;X=1404;Z=-293;W=111;H=28;h();X=1185;Z=-240;W=168;h();X=1544;Z=-391;W=53;H=65;h();c(1231,-122);c(1232,-147);c(1233,-171);c(1233,-194);c(1278,-97);c(1335,-103);c(1307,-98);c(1297,-144);c(1318,-130);c(1324,-195);c(1339,-171);c(1324,-156);c(1298,-200);c(1273,-187);c(1231,-97);Y=0;f=10;B=234;X=246;Z=-482;
W=50;H=70;h();B=4095;X=476;Z=-411;W=27;h();X=1441;Z=-391;W=20;H=97;h();var z={32:0};la.addEventListener("keydown",function(a){z[a.keyCode]=1;b.left=z[37];b.right=z[39];b.C=z[32]});la.addEventListener("keyup",function(a){z[a.keyCode]=0;b.left=z[37];b.right=z[39];b.C=z[32]});var Ha=d.createRadialGradient(12,-7,3,12,-7,28);Ha.addColorStop(0,"#8ED6FF");Ha.addColorStop(1,"#004CB3");var n=40,v=n/4,b={};aa();var Za=G([0,,0.1453,,0.225,0.3726,,0.12,0.22,,,,,0.1547,,,,,1,,,,,0.35]),$a=G([0,,0.1,,0.22,0.3726,
,0.14,0.2,,,,0.12,0.1547,,,,,1,,,,,0.26]),Ka=G([0,,0.11,0.16,0.09,0.227,0.04,-0.18,0.34,,,,,0.23,0.12,,,,1,0.2,0.16,0.1,,0.32]);Q=ca=b.b-0.5*u;ea=ja=b.d-0.8*p;var d=Ta,za=t=0;I(Ra)})();
